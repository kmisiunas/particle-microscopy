<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0072)http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="http://www.nongnu.org/elyxer/">
<meta name="create-date" content="2014-10-27">
<link rel="stylesheet" href="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/lyx.css" type="text/css" media="all">
<title>The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports</title>
</head>
<body>
<div id="globalWrapper">
<h1 class="title">
The Video Streaming System<br>
Being the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports
</h1>
<h2 class="author">
By Enrico Segre
</h2>
<div class="Address">
<div class="center">
Weizmann Institute of Science 
</div>

</div>
<h2 class="Date">
Oct 27, 2014
</h2>
<div class="Indented">
<p><br>
</p>

</div>
<div class="fulltoc">
<div class="tocheader">
Table of Contents
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Chapter-1">Chapter 1: Generalities</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-1.1">Section 1.1: Scope</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-1.2">Section 1.2: The name</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-1.3">Section 1.3: Design Choice</a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Chapter-2">Chapter 2: Installation </a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-2.1">Section 2.1: Hardware</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.1.1">Subsection 2.1.1: Server platform</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.1.2">Subsection 2.1.2: Camera</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.1.3">Subsection 2.1.3: Framegrabber</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.1.4">Subsection 2.1.4: Disk array and RAID controller</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.1.5">Subsection 2.1.5: DAQ</a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-2.2">Section 2.2: Software</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.1">Subsection 2.2.1: OS</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.2">Subsection 2.2.2: RAID setup</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.3">Subsection 2.2.3: Framegrabber driver and SDK</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.4">Subsection 2.2.4: Camera configuration files</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.5">Subsection 2.2.5: Labview</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.6">Subsection 2.2.6: Framegrabber LV layer</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.7">Subsection 2.2.7: Camera control software</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.8">Subsection 2.2.8: Application programs</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.9">Subsection 2.2.9: AVI codecs</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-2.2.10">Subsection 2.2.10: Goodies and Ancillaries</a>
</div>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Chapter-3">Chapter 3: Applications: user manual</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-3.1">Section 3.1: Gonzales</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.1">Subsection 3.1.1: Main image tools and information</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.2">Subsection 3.1.2: Camera control</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.3">Subsection 3.1.3: Streamfile control</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.4">Subsection 3.1.4: Recording control</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.5">Subsection 3.1.5: Tabs</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.6">Subsection 3.1.6: the Streaming statistics tab</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.7">Subsection 3.1.7: the Self Tracker tab</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.8">Subsection 3.1.8: the Hotspots &amp; Triggers tab</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.9">Subsection 3.1.9: Formulas</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.1.10">Subsection 3.1.10: Session control</a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-3.2">Section 3.2: ImageReader</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.1">Subsection 3.2.1: Streamfile controls</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.2">Subsection 3.2.2: Main image and File info</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.3">Subsection 3.2.3: Movie position controls</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.4">Subsection 3.2.4: Jog shuttle</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.5">Subsection 3.2.5: the Single blobbing tab</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.6">Subsection 3.2.6: the ROI logic tab</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.2.7">Subsection 3.2.7: the Playlist tab</a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section-3.3">Section 3.3: Goodies</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.3.1">Subsection 3.3.1: WriteSpeedTestNormal</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.3.2">Subsection 3.3.2: UDPSender2 and UDPReceiver2</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.3.3">Subsection 3.3.3: AVItoStreamfile</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection-3.3.4">Subsection 3.3.4: matlab scripts</a>
</div>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Appendix-A">Appendix A: Streamfile API</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--1">Section: Streamfiles format since Gonzales3</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--1">Subsection: Header (first block, size=1 sector):</a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--2">Subsection: Each image contains:</a>
</div>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Appendix-B">Appendix B: Changelogs</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--2">Section: Gatto10</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--3">Subsection: <u>26/10/2014</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--4">Subsection: <u>12/3/2014</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--5">Subsection: <u>2/1/2014</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--3">Section: Gatto9</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--6">Subsection: <u>15/8/2013</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--7">Subsection: <u>19/3/2013</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--8">Subsection: <u>21/1/2013</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--9">Subsection: <u>15/1/2013</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--10">Subsection: <u>1/1/2013</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--4">Section: Gatto8+</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--11">Subsection: <u>25/12/2012</u> </a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--12">Subsection: <u>23/12/2012</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--13">Subsection: <u>27/9/2012</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--14">Subsection: <u>11/7/2012</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--5">Section: Gatto6&amp;7</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--15">Subsection: <u>21/9/2011</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--6">Section: Gatto 5</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--16">Subsection: <u>21/1/2011</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--7">Section: Gatto4</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--17">Subsection: <u>21/9/2010</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--8">Section: Gatto 3</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--18">Subsection: <u>6/1/2010</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--9">Section: Gatto 2</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--19">Subsection: <u>23/11/2009</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--20">Subsection: <u>19/11/2009</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--21">Subsection: <u>17/11/2009</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--22">Subsection: <u>23/11/2009</u></a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Section--10">Section: Gatto</a>
</div>
<div class="tocindent">
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--23">Subsection: <u>12/10/2009</u></a>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Subsection--24">Subsection: <u>11/10/2009</u></a>
</div>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#toc-Appendix-C">Appendix C: Problems encountered in the past</a>
</div>
</div>
<div class="toc">
<a class="Link" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#Index">Index</a>
</div>

</div>
<h1 class="Chapter">
<a class="toc" name="toc-Chapter-1">1</a> Generalities
</h1>
<h2 class="Section">
<a class="toc" name="toc-Section-1.1">1.1</a> Scope
</h2>
<div class="Unindented">
This manual references the construction and documents the use of the fast video hard disk recording systems built for Ehud Ahissar’s group, mostly from the software point of view. There are at the moment of writing four such systems, with small differences among them. There have been continued upgrades to the software which I developed, with a loose versioning notation. At this moment, the topmost versions of the two relevant application programs are the video stream-to-disk application <b><span class="ProgramName">Gonzales10.3</span></b>, and its companion movie reader/editor <span class="ProgramName">ImageReader9.3</span>, residing in directory <span class="ProgramName">Gatto10</span>. The numbers are supposed to change incrementally at new releases. Usually a file <b>CHANGES</b> in the directory briefly documents the new features and issues. (Ad nauseam historical information is reproduced here in Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Changelogs">B↓</a>).
</div>
<div class="Indented">
The general user of the systems will be probably interested only in the contents of Chapter <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Applications:-user-manual">3↓</a>. The rest of this manual covers more technical issues, such as design choices, building and installation of the systems, which need to be documented and referenced somewhere.
</div>
<h2 class="Section">
<a class="toc" name="toc-Section-1.2">1.2</a> The name
</h2>
<div class="Unindented">
The names of the two main user programs, <span class="ProgramName">Gonzales</span> and <span class="ProgramName">ImageReader</span>, are because Udi Fonio did not come up in due time with better ones. The contest is also open for nice icons.
</div>
<h2 class="Section">
<a class="toc" name="toc-Section-1.3">1.3</a> Design Choice<a class="Label" name="sec:Design-Choice"> </a>
</h2>
<div class="Unindented">
The systems were conceived in the first place in order to have high-speed Digital Video Recording (DVR) installations, with the option of continuous modifications and adaptation to emerging experimental needs. In-house development was preferred to acquiring a turn-key commercial solution, for the perspective of openness of programming and for a system cost which was anticipated to be significantly cheaper. The long development required by system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↓</a> (months/man) perhaps smoothed the latter point, but the subsequent small effort (days/man) in duplicating to systems #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↓</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↓</a> completely justified it.
</div>
<div class="Indented">
The systems were developed on a desktop-pc platform. Several advantages and a few disadvantages of the choice can be enumerated, but in truth no alternative platform (e.g. a real time target) was considered. A desktop pc OS allows software development already on the target machine, considerably shortening testing cycles; allows integration with whatever other user productivity software; gives the advantage of an immense user and resource basis to look at in case of problems, and so on. On the other side, precise task scheduling is difficult and accurate timing nearly impossible, requiring a lot of programming attention to keep jitter under acceptable constraints. The target requirements for the DVR were zero frame loss and nearly millisecond-accurate timestamping and trigger responsiveness, and it seems that they are met in most operating conditions. Additionally, continuous operation and storage capability for several hours were sought.
</div>
<div class="Indented">
The current implementation met this requirements, thanks to the choice of suitable hardware and software, stock and custom, as described in the following.
</div>
<div class="Indented">
Labview was chosen as a programming framework for its intrinsic multithreaded parallelism, huge user and resource base, and wealth of resources for building advanced GUIs.
</div>
<div class="Indented">
Two topmost user applications were developed, separating the tasks of a) grabbing and recording high speed movies (<span class="ProgramName">Gonzales</span>, see below Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sec:Gonzales">3.1↓</a>), b) reviewing and editing the saved movie streams (<b><span class="ProgramName">ImageReader</span></b>, see below Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sec:ImageReader">3.2↓</a>).
</div>
<div class="Indented">
The principle of operation of the system is to have a fast digital video camera, without internal memory, streaming continuously its images to the framegrabber inside the computer. The incoming images are stored in computer memory in a large circular ringbuffer, in order to mitigate system latency. Currently a hardwired ringbuffer of size equal to 400 images is used, as the number provided a good compromise of performance, tolerance to latency and memory footprint in typical use conditions. As permitted by processing power, thread priorities and access limitations, images within the incoming stream are periodically inspected and subjected to light image processing, for instance in order to detect intensity differences in selected hotspots, or to insert intrusive timestamps. When writing to disk is activated (either by user command or caused by some electrical trigger signal, or after the detection of some image feature in the incoming stream), images from the ringbuffer are written to the disk system in a streamfile. The highest priority is given to the streaming process in order to have a lossless recording to the disk; since the application lives in userspace of a desktop OS, absolute certainty and prevention of disruptions by other OS tasks can’t be guaranteed; it is however in practice achieved.
</div>
<div class="Indented">
The target image rate for which the system have been designed is 1.28Mpixel images at 500fps, or 600kpixel at 1000fps, 1 byte per pixel. Given the data bandwidth required, no data compression is even attempted; the raw data is dumped to a huge streamfile with as little formatting and manipulation possible. A custom file format has been devised, which is documented in Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>. This format deviates by necessity, design and choice from common media file formats, and a companion reading application has been built. Otherwise, a programmer is also able to access the streamfile content using the API description provided.
</div>
<div class="Indented">
The hard disk system chosen exceeds by some margin the writing throughput required for full size, full speed recording of a single stream at a time. The performance is guaranteed for writing at least in the initial part of the disk storage, for essentially unfragmented files, while no other disk operation is taking part. For that reason, it is recommended to free the hard disk system periodically, and to avoid to use it as a permanent data storage. The disk systems have been designed with a capacity sufficient for storing a few hours of recording. The performance of the disk system in reading back has not been assessed; while there has been no thought of displaying back the movie at the same speed it was shot, a good reading performance would be of concern for operation of analysis of the movie or format conversion. In such case, though, the computational cost of the involved operation may be more determinant than the readout time itself.
</div>
<div class="Remark*">
It is also to be noted that the highest writing speed to the disk system is achieved by writing a blocks of data of optimal size (of the order of some MB) at a time. In our applications I chose, both for simplicity and to limit the amount of memory copies of the data, to stream essentially one image at a time to the disk. For full size images, that is found to be not too far from the optimal block size; however, the cameras would be able of acquiring smaller images at a much higher frames frame rate, exploiting the same data bandwidth. With the present design, though, the efficiency of writing smaller blocks more frequently would be considerably smaller, and streaming would not be possible at higher fps without a design change. From preliminary tests it would seem that the current limit could be at about 300kpixel @ 2000fps. The solution would involve dumping several images at a time to disk with a single write operation; in order to do that content has to be copied around in memory, which also penalizes throughput. 
</div>
<div class="Unindented">
The video streaming application and the movie reader/editing application have been deliberately separated, having in mind that the two operations are never supposed to take part simultaneously. Their GUIs could have been integrated, but for modularity of development it has been chosen not to.
</div>
<div class="Indented">
The platforms chosen have sufficient computational power to allow parallel run of other user applications, such as the experimental trial software <span class="ProgramName">BEst</span> (Eldad Assa) on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↓</a>. Applications with simultaneous slower grabbing from an additional range camera have also been tried.
</div>
<h1 class="Chapter">
<a class="toc" name="toc-Chapter-2">2</a> Installation 
</h1>
<div class="Unindented">
Here is a list of hardware and software components required for the complete setup of the video system, with some notes about where to get them from, and about experiences in building the four systems to date.
</div>
<h2 class="Section">
<a class="toc" name="toc-Section-2.1">2.1</a> Hardware
</h2>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.1.1">2.1.1</a> Server platform
</h3>
<div class="Unindented">
Four systems have been built so far: 
</div>
<ol>
<li>
<b><a class="Label" name="system1"> </a>ahissar-pc55</b> (“Udi’s”, “room 69”), building (assembling and setup at WIS) started 6/5/2009;
</li>
<li>
<b><a class="Label" name="system2"> </a>ahissar-pc66</b> (“behavioral”, “Inbar’s”), built about 9-10/2010, as an exact copy of #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a>
</li>
<li>
<b><a class="Label" name="system3"> </a>OPTOWHISKER</b> (“Tess’”), building started 23/12/2012.
</li>
<li>
<a class="Label" name="system4"> </a><b>MAMTAK</b> (“Noy’s”), building started 19/12/2013.
</li>

</ol>
<div class="Unindented">
The first two use a server-class Tyan Tempest 5400PW S5397 motherboard; the third one a Supermicro. The fourth an i7-4930 @3.4,4GHz motherboard, with 32GB RAM.
</div>
<div class="Indented">
In general warranty on hardware components was given for three years, which implies that system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> becomes difficult to maintain. In addition, the commercial life and availability of computer components is nowadays short, and hinders the long-term serviceability of the systems.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.1.2">2.1.2</a> Camera
</h3>
<div class="Unindented">
We are using on the four setups an Optronis CL600x2, which is a 500fps, 1.3Mp, 40%QE full CameraLink CMOS camera. The four cameras were purchased at subsequent times and have different versions of firmware installed. Notably, the camera used in setup #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> has a firmware (already upgraded at least once in the past) which is buggy in its feature of framestamping.
</div>
<div class="Remark*">
According to previous experience, firmware update FAILS if done on a system using the Karbon framegrabber; another one has to be used. Contact 1Vision in case needed.
</div>
<div class="Unindented">
In initial stages of the development a Basler A504k was also considered, then dismissed because of lower sensitivity (~10%QE peak). <span class="ProgramName">Gonzales</span> once could use either the CL600x2 or the A504k, and has been since then incrementally developed still including the full set of commands required to drive the latter in its various modes, but the functionality is untested since long. If it would be needed to use a recent version <span class="ProgramName">Gonzales</span> with the Basler A504k, a complete reassessment would be needed, as plug-in compatibility of the old camera can’t be taken anymore for granted.
</div>
<div class="Indented">
Different camera models differ greatly in their set of serial control commands, and hence new software has to be developed for each different model, should a different new camera be considered. In practice, this would amount to rewrite or augment a small part of the code of <span class="ProgramName">Gonzales</span> to support new camera modes.
</div>
<div class="Indented">
The maximal number of frames per second (<span class="formula"><i>fps</i></span>) which the camera can deliver is an arithmetic function of the width and height of the image, of the pixel clock and of the number of taps of readout (essentially, but not exactly, <span class="formula"><i>fps</i>≃(<i>clock</i>*<i>taps</i>) ⁄ (<i>width</i>*<i>height</i>)</span>). The details are documented in the camera manuals. The maximal exposure time at a given <span class="formula"><i>fps</i></span> is a few microseconds less than <span class="formula">1 ⁄ <i>fps</i></span>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.1.3">2.1.3</a> Framegrabber<a class="Label" name="sub:Framegrabber"> </a>
</h3>
<div class="Unindented">
After an initial attempt in <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> with the older framegrabber National Instruments NI-1429e (PCIe x4) which was not up to the task, we adopted for the first three systems the Bitflow Karbon-CL-full (PCIe x8) (KBN-PCE-CL2-F). This framegrabber was, as of end 2012, announced as going end-of-line, but the KBN-PCE-CL4-F is available instead, and was used in <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system4">2.1.1↑</a>. All versions of <span class="ProgramName">Gonzales</span> require now the presence of the Karbon, and won’t work with another framegrabber without modifications of some extent.
</div>
<div class="Indented">
The framegrabber has to be placed into a true x8 PCIe slot to deliver full performance. In the first two systems, one of the PCIe slots is physically large (x4), but truly connected as x1 only.
</div>
<div class="Indented">
On the first two systems, the framegrabber “prevents the system entering sleep mode” according to the OS.
</div>
<div class="Indented">
On system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a>, it happens occasionally that the framegrabber is not recognized by the system at cold boot. In such cases, turning off the computer for a few minutes and then on may solve the problem. In the past, we went even as far as extracting physically the card and reinserting it, but that is probably unnecessary.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.1.4">2.1.4</a> Disk array and RAID controller<a class="Label" name="sub:Disk-array-and"> </a>
</h3>
<div class="Unindented">
In all four systems, an array of 8 disks attached to a dedicated LSI PCIe controller was used. On the first two systems the individual disks are of 1TB (SATA, I think), on the third of 2TB.
</div>
<div class="Indented">
System #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> originally used a different RAID controller (LSI Logic MegaRAID SAS 84016E and an array of 9 disks), which was underperforming AND hogging the system buses to the point of slowing down the system clock (which caused very puzzling timing results). That controller has been since then replaced with a LSI MegaRAID SAS 9260-8i).
</div>
<div class="Indented">
System #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> has suffered from failure of several of the original hard disks (which were lower grade 700GB units). In summer 2012 the whole set of disks has been replaced.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.1.5">2.1.5</a> DAQ
</h3>
<div class="Unindented">
System #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a> is supplemented by a NI-6501 24port digital i/o USB card used for triggering. The program <span class="ProgramName">Gonzales</span> knows how to make use of National Instruments with DI/O ports if found on the system.
</div>
<h2 class="Section">
<a class="toc" name="toc-Section-2.2">2.2</a> Software
</h2>
<div class="Unindented">
The following is a list of components to be cared for, installed and configured.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.1">2.2.1</a> OS
</h3>
<div class="Unindented">
The choice is unfortunately limited to Windows for availability of Labview vision development modules.
</div>
<div class="Indented">
Systems #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a> run on windows XP32. The choice was dictated by compatibility problems with the rest of the software available at the time of the assembling of the system (XP64 was tried on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and Windows7 64bit on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a>). Systems #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a> and <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system4">2.1.1↑</a> run Windows7 64bit.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.2">2.2.2</a> RAID setup
</h3>
<div class="Unindented">
32bit OSs do not support volumes other than formatted as MBR and larger than 2TB, hence logical RAIDing of MBR subvolumes has to be done by the OS (Manage storage devices/create dynamical disks).
</div>
<div class="Indented">
The four systems have been provided with a configuration tool by LSI, functional save some quirks. (The tool requires credentials; current ones are<span class="code"> <tt>Administrator</tt>/<tt>barrel05</tt>/</span> on systems #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a>, <tt><span class="code"><tt>Admin</tt>//</span></tt> on #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a>).
</div>
<ul>
<li>
system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a> have been configured as 4 logical volumes of 2 disks each, independent volumes at controller level.
</li>
<li>
system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a> has been configured as a single logical volume including all 8 disks at controller level.
</li>

</ul>
<div class="Unindented">
The writing throughput of all systems has been checked with the tool WriteSpeedTestNormal described in Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:WriteSpeedTest">3.3.1↓</a>. Sustained writing speed in excess of 750MB/s are desirable in order to allow enough throughput for full speed, full size grabbing (625MB/s). The need for a somehow higher writing speed is probably due to the fact that DMA transfer to and from memory, and PCIe bus arbitrage limit the parallelism of grabbing and dumping data to the disk controller; some part of the transfer may need exclusive hold of the data buses.
</div>
<div class="Indented">
The best configuration parameters for the RAIDed disks appear to be: <i>Stripe length</i> <b>64kB</b>, <i>Write Policy</i> <b>Always Write Back</b>. Setting <i>Write Policy</i> to <u>Write trough</u> negatively affects the throughput. The effect of the setting <i>I/O policy</i> (<b>Cached</b> or <b>Direct I/O</b>) seems unimportant for the purpose. With those, all four systems seem capable of sustained average throughputs of the order of 850-900MB/s.
</div>
<div class="Remark*">
Setting the array in Write Trough mode, the apparent write speed may be even higher, up to ~1.5GB/s, in the first seconds of writing, as the data is dumped to the controller cache. We are not specifically relying on this fact, which could be useful if we were planning writes of higher volumes of data in burst mode.
</div>
<div class="--Separator--">

</div>
<div class="Remark*">
It is relevant to observe, from the technical/Labview programming point of view, that such writing speeds are achieved by rigorously unbuffered, sector aligned file writes. Direct calls to windows API functions like <tt><span class="code"><tt>CreateFileA()</tt></span></tt>, <tt><span class="code"><tt>WriteFile()</tt></span></tt> in <tt><span class="code"><tt>kernel32.dll</tt></span></tt> are used to maximize throughput, at the expense of code portability (which is anyway hindered by the heavy use of image processing functions, available only in Labview for windows). Use of native LV file access functions is possible and has been tried, but unfortunately would require one additional buffer creation and memcopy at a critical moment in dumping the image to streamfile, which as a result limits the throughput to only ~70% of the maximum needed.
</div>
<div class="Unindented">
The effect of RAID parameters related to the <i>Read policy</i> has not been assessed, but could be relevant for optimal performance of <span class="ProgramName">ImageReader</span> in scanning movies for activity or exporting movies.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.3">2.2.3</a> Framegrabber driver and SDK
</h3>
<div class="Unindented">
These are downloaded from <a class="URL" href="http://www.bitflow.com/index.php/DownloadTable">http://www.bitflow.com/index.php/DownloadTable</a>. The versions installed are 5.20 on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a>; 5.30 (I think inclusive of a patch, see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?t=403">http://www.bitflow.us/Forum/viewtopic.php?t=403</a>) has been tried but abandoned on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a>; 5.60 on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a> and <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system4">2.1.1↑</a>. SDK 5.70 has also been unsuccessfully tried on <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system4">2.1.1↑</a> but abandoned due to bugs of the initial release with LV2012_64bit and LV2013_64bit, see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?f=7&t=527&p=1487">http://www.bitflow.us/Forum/viewtopic.php?f=7&amp;t=527&amp;p=1487</a>.
</div>
<div class="Indented">
Probably the driver has to be installed before the installation of the card for smooth system recognition.
</div>
<div class="Indented">
We did not buy the full SDK license, hence we do not have an authorization code to provide to the installer, and only a part of the toolkit gets copied. In particular, we miss the functionality for changing programmatically some framegrabber modes, and we have to resort to the tiny prebuilt tools for that.
</div>
<div class="Indented">
Useful tiny tools: for the user, <span class="ProgramName">SysEx</span> (checks that the Bitflow framegrabber is recognized, chooses the camera configuration file and sets bus priorities); <span class="ProgramName">CiView</span> (previews the camera image, if all is set up and camera is started correctly). There is also <span class="ProgramName">CamEdit</span> for creating camera configuration files (for advanced users only).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.4">2.2.4</a> Camera configuration files<a class="Label" name="sub:Camera-configuration-files"> </a>
</h3>
<div class="Unindented">
I have created (with the tool <span class="ProgramName">CamEdit</span> provided by the Karbon SDK) a few camera configuration files for the common image formats used. These files need to be copied in the directory <tt>&lt;SDKdir&gt;\R64\Config</tt>, where <tt>&lt;SDKdir&gt;</tt> may be e.g. <tt>C:\Bitflow\SDK 5.60\</tt> or such depending on installation. We need different files for various formats because, since we don’t have the license for the part of the SDK allowing to change the resolution and tap mode of the image grabbed by the Karbon, I use the trick of swapping configuration file references in the Windows Registry (see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?p=1034">http://www.bitflow.us/Forum/viewtopic.php?p=1034</a>).
</div>
<div class="Indented">
Additional configuration files could be built with <b><span class="ProgramName">CamEdit</span></b>, to allow for different combinations of image sizes and shooting speed, keeping in mind the design limitation mentioned in Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sec:Design-Choice">1.3↑</a>. It has additionally to be kept in mind that only particular image widths are admissible by the combination of Karbon SDK + Labview (see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?t=398">http://www.bitflow.us/Forum/viewtopic.php?t=398</a>). Namely, the width of the image has to be a common multiple of 64 and the number of taps (8 or 10).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.5">2.2.5</a> Labview
</h3>
<div class="Unindented">
Systems #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> and #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a> have installed a 32bit version of LV2009 (f2, if I don’t err). On system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system2">2.1.1↑</a> we tried LV2010 on 32 and 64bit Windows XP, but the choice (together with SDK 5.20 or 5.30) proved unworkable because of an obscure bug causing LV crash when particular CameraLink serial commands were sent, preventing in practice the operation the camera (see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?t=400">http://www.bitflow.us/Forum/viewtopic.php?t=400</a>).
</div>
<div class="Indented">
On system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a> we’re going on with LV2012 64bit, and on <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system4">2.1.1↑</a> with LV2013 64bit. The installers of the 64bit versions of LV and VDM are not provided by the standard DVD set, and have to be requested specially or downloaded from <a class="URL" href="http://www.ni.com/downloads/">http://www.ni.com/downloads/</a>. The disk of the Device Drivers included in the set, instead, is ok (though 32bit?)
</div>
<div class="Indented">
It is important to install either 32bits or 64bits versions of all software (OS, drivers, LV) because interoperability of 32/64bit components on a 64 bit system if not guaranteed, if ever conceivable (perhaps possible with the latest versions?).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.6">2.2.6</a> Framegrabber LV layer
</h3>
<div class="Unindented">
Needs to be downloaded (version according to the SDK installed) also from <a class="URL" href="http://www.bitflow.com/index.php/DownloadTable">http://www.bitflow.com/index.php/DownloadTable</a>. The version “LabView 2009/2010/2011 Drivers” has a typing bug relevant for the use in conjunction with SDK 5.60/64 bit, at least, which has to be corrected (see <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?p=1299">http://www.bitflow.us/Forum/viewtopic.php?p=1299</a>).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.7">2.2.7</a> Camera control software
</h3>
<div class="Unindented">
Optronis provides a small program called <b><span class="ProgramName">CamSetup</span></b>, to change/report camera settings via serial-on-cameralink commands. Though the useful part of the functionality of this program is duplicated in Gonzales, the tool may be handy for independent testing. Note: earlier versions of CamSetup, installed on the first two systems, don’t support 10tap modes.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.8">2.2.8</a> Application programs
</h3>
<div class="Unindented">
<span class="ProgramName">Gonzales</span>, <b><span class="ProgramName">ImageReader</span></b>, coming along with their ancillary Labview library files (llb), provided by me. My <b><span class="versalitas">strong</span></b> attitude is to provide a single version of these programs for all systems, and to maintain only the very latest version of the two programs. The aim is therefore to leave as many features inside the programs as possibly needed in all use scenarios when creating new versions, removing unused features only if really obsoleted.
</div>
<div class="Indented">
The past experience has been that unfortunately, due to the software and hardware differences between the four platforms, porting a new version of the programs developed on one system to the other two is never just a matter of copying some file; additional troubleshooting and adaptations have always been necessary. I’m striving each time to produce more portable and auto-adapting versions, to reduce this cost and dependence on my exclusive expertise.
</div>
<div class="Indented">
Developing Gonzales at the present state is possible only in presence of the grabbing hardware, i.e. on one of the four systems themselves, while it is possible to develop ImageReader on a different computer with the necessary components of Labview installed.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.9">2.2.9</a> AVI codecs
</h3>
<div class="Unindented">
Movies or excerpts from them can be exported from <span class="ProgramName">ImageReader</span> in either native stream format, or uncompressed AVI, or AVI various compressed by mean of various codecs. The codecs seen by the Labview program <span class="ProgramName">ImageReader</span> are those installed systemwise, hence if some odd ones are desired, they have to be taken care of.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2.2.10">2.2.10</a> Goodies and Ancillaries
</h3>
<div class="Unindented">
A few other files are usually included in the relevant (the latest) <b>GattoN</b> directory, containing the latest version of my programs. These may include small test programs like <span class="ProgramName">WriteSpeedTestNormal</span>, <span class="ProgramName">UDPReceiver2</span>, which may be useful for troubleshooting, or sample matlab scripts.
</div>
<h1 class="Chapter">
<a class="toc" name="toc-Chapter-3">3</a> Applications: user manual<a class="Label" name="chap:Applications:-user-manual"> </a>
</h1>
<h2 class="Section">
<a class="toc" name="toc-Section-3.1">3.1</a> Gonzales<a class="Label" name="sec:Gonzales"> </a>
</h2>
<div class="Unindented">
The program runs on opening, and tries to connect immediately with a running camera. The program reads a configuration file, if that is present, containing all the settings saved automatically at the end of the previous run. If the camera is turned off, or if there is any other hardware or setup problem, the program may hang for several seconds and be unresponsive.
</div>
<div class="Indented">
The program opens with a front panel window depicted below, where the various controls and indicators are broadly grouped according to their function. The following sections describe each group.
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesOverview.png" alt="figure images/GonzalesOverview.png" style="width: 80%; max-width: 1198px; height: auto; max-height: 894px;">

</div>

</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.1">3.1.1</a> Main image tools and information<a class="Label" name="sub:Gonzales-Main-image"> </a>
</h3>
<div class="Unindented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesMainImage.png" alt="figure images/GonzalesMainImage.png" style="width: 70%; max-width: 748px; height: auto; max-height: 517px;">

</div>
<div class="Indented">
The program shows in its larger inset window the image acquired by the camera (if it is turned on, if there is enough illumination, if parameters are correct). Since there would be no point in trying to show every image coming from a fast camera (the eye would not appreciate, and the computational load would be prohibitive), the display is refreshed as specified by the <div class="wrap-r">
<div class="figure">
 <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/showimage.png" alt="figure images/showimage.png" style="width: 38px; max-width: 77px; height: 45px; max-height: 90px;">

</div>

</div>
<b> <a class="IndexReference" name="entry-Show-Image-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Show-Image">↓</a><span class="LVcontrol"><b>Show&nbsp;Image</b></span></b> slider. Normally <span class="ControlValue">5fps</span> is a reasonable compromise providing enough feedback about what is happening under the camera without spoiling the exactness of software timing; in normal circumstances even <span class="ControlValue">25fps</span> is affordable. For testing purposes (e.g. on former systems on which screen drawing was very CPU intensive, and interfered with video streaming), the display can also be suppressed (position “<span class="ControlValue">No Show</span>”). In such case, clicking on the image still refreshes it.
</div>
<div class="Indented">
<div class="wrap-i" style="max-width: 30%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/outofsync.png" alt="figure images/outofsync.png" style="max-width: 960px; max-height: 768px;">

</div>

</div>

</div>
<div class="Remark*">
<a class="Label" name="remark:out-of-sync"> </a> Occasionally, the camera image may appear “out of sync”, being broken and shifted with respect to the frame. This may appear during recording because of slowed down disk access (fragmented disk or hardware failure), but sometimes just because of transient high system load due to other OS processes, or to trivial reasons like the camera being turned on after the program is started. In this case, reinitializing the grabbing by choosing again the same <b><a class="IndexReference" name="entry-Karbon-camera-configuration-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Karbon-camera-configuration">↓</a></b><span class="LVcontrol"><b>Karbon camera configuration</b></span>, as described in Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-settings-frame">3.1.2↓</a>, should recover the situation. [On system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a> this problem used to be frequent before a dedicated video card was added to the system, in concomitance of high screen activity (moving around windows, showing the main image at 25 fps, etc].
</div>
<div class="Unindented">
The main image can be zoomed in or out (select the <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/lupe.png" alt="figure images/lupe.png" style="width: 11px; max-width: 22px; height: 9px; max-height: 18px;">
 <i>lupe<a class="IndexReference" name="entry-lupe-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-lupe">↓</a></i> tool at the upper right corner of the image), panned (select the <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/hand.png" alt="figure images/hand.png" style="width: 12px; max-width: 24px; height: 10px; max-height: 21px;">
 <i>hand</i><a class="IndexReference" name="entry-hand-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-hand">↓</a>), or rectangular <b>R</b>egions <b>O</b>f <b>I</b>nterest (<a class="IndexReference" name="entry-ROI-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI">↓</a>ROI) can be drawn (select the <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/rectangle.png" alt="figure images/rectangle.png" style="width: 12px; max-width: 24px; height: 10px; max-height: 20px;">
 <i>rectangle<a class="IndexReference" name="entry-rectangle-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-rectangle">↓</a></i>). Multiple ROIs can be drawn holding Control; ROIs can be dragged around and adjusted by their corner handles, and a right-click menu allows to clear them selectively.
</div>
<div class="Indented">
There are few different uses of the ROIs. As functionalities were added along time when new requests emerged, some of these functionalities may seem odd nowadays, or don’t exactly harmonize one with the other. Wherever possible, effort has been made in order to preserve all older functions when adding new ones, though it may be that bugs slipped trough the cracks. For some of them only <i>one</i> ROI (the first defined) makes sense, other functions are designed to support <i>multiple</i> ROIs. The functions are described below in the relevant subsections.
</div>
<div class="Indented">
The button <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ROIall.png" alt="figure images/ROIall.png" style="width: 18px; max-width: 37px; height: 19px; max-height: 38px;">
 <b><a class="IndexReference" name="entry-ROI-all-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-all">↓</a></b><span class="LVcontrol">ROI all</span> creates a single ROI enclosing the whole image.
</div>
<div class="Indented">
Below it, the recessed button with a <b><img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/crosshair.png" alt="figure images/crosshair.png" style="width: 15px; max-width: 30px; height: 13px; max-height: 26px;">
 <a class="IndexReference" name="entry-crosshair-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-crosshair">↓</a></b><span class="LVcontrol">crosshair</span> symbol toggles the drawing of a red crosshair in the center of the image. This may be of no use nowadays, it was an aid in pointing and tracking in earlier versions.
</div>
<div class="Indented">
Below these controls, an <span class="LVcontrol">anonymous frame</span> displays: the current image size, the current zoom factor, the intensity value of the pixel under the cursor and its coordinates, when the mouse is hovered over the image.
</div>
<div class="Indented">
The indicator <b><a class="IndexReference" name="entry-ROI-size-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-size">↓</a></b><span class="LVcontrol">ROI size</span> reports the size in pixels of the first ROI currently defined, while <b><a class="IndexReference" name="entry-Global-Rectangle-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Global-Rectangle">↓</a></b><span class="LVcontrol">Global Rectangle</span> gives the coordinates of the opposite corners of the rectangle enclosing all ROIs.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Hotspot</span><a class="IndexReference" name="entry-Hotspot-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Hotspot">↓</a></span> enables the computation of differences within ROIs, and its use for generating trigger, as explained in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Hotspots">3.1.8↓</a>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.2">3.1.2</a> Camera control<a class="Label" name="sub:Camera-settings-frame"> </a>
</h3>
<div class="Unindented">
<div class="wrap-l" style="max-width: 60%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesCameraControl.png" alt="figure images/GonzalesCameraControl.png" style="max-width: 636px; max-height: 133px;">

</div>

</div>

</div>
<div class="Indented">
Above the main image, inside an orange beveled frame. This frame groups several controls changing the mode of operation of the camera, and some checkboxes determining the kind of invasive framestamp added to each picture. Two of the framestamps options are generating by the program, rather than being modes of operation of the camera itself, but pertain to the same logical group. As per each individual control and indicator:
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>camera&nbsp;setup</b></span><a class="IndexReference" name="entry-camera-setup-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-camera-setup">↓</a></b></span> selects between <span class="ControlValue">Optronis</span> (our current only option in all systems), <span class="ControlValue">Basler</span><i> </i>(if still works across versions) and <span class="ControlValue">no serial command</span><i>.</i> The latter is a fallback option for eventual unknown cameras, or problems in sending serial commands to the camera. The setting also determines which of the other controls of the frame are visible and enabled, as the two cameras don’t support perfectly equivalent commands and modes. There is no point in using <span class="ControlValue">Basler</span> in a setup with the Optronis; camera commands are different and wont have any predictable effect.
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>Karbon&nbsp;camera&nbsp;configuration</b></span><a class="IndexReference" name="entry-Karbon-camera-configuration-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Karbon-camera-configuration">↓</a></b></span> is a pulldown menu which allows to choose among the available camera configuration files (see Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-configuration-files">2.2.4↑</a>). When one is chosen, the disabled control <b><a class="IndexReference" name="entry-taps-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-taps">↓</a></b><span class="LVcontrol">taps</span> shows the pertinent number of readout taps, and the indicator <span class="LVcontrol">fps max</span><b><a class="IndexReference" name="entry-fps-max-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-fps-max">↓</a></b> the maximal number of frames per second which the camera can deliver at that image format, as communicated by the camera.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">fps</span><a class="IndexReference" name="entry-fps-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-fps">↓</a></span> The actual speed of take can be set with the control <b><span class="LVcontrol">fps</span></b>, with resolution of 1 fps. The value entered is clipped to the maximum possible. The minimal value for the Optronis is 20 fps.
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>exposure&nbsp;time&nbsp;us</b>,&nbsp;<b>exp&nbsp;max</b></span><a class="IndexReference" name="entry-exposure-time-us-exp-max-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-exposure-time-us-exp-max">↓</a></b></span> The exposure time in <span class="formula"><i>μ</i></span>s is set by <span class="LVcontrol">exposure time us</span><b><a class="IndexReference" name="entry-exposure-time-us-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-exposure-time-us">↓</a></b>, and limited by the value communicated by the camera and indicated in <span class="LVcontrol">exp max</span>, slightly smaller than 1/fps (due to a dead time before readout). If <span class="LVcontrol">fps</span> is changed, <span class="LVcontrol">exp max</span> changes, and <span class="LVcontrol">exposure time us</span> is reduced automatically if needed. In general usage, an exposure time as long as possible allows to collect more light, whereas it may be desirable to reduce it to reduce motion blur.
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>pixel&nbsp;clock</b></span><a class="IndexReference" name="entry-pixel-clock-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-pixel-clock">↓</a></b></span> refers to the camera readout speed. The Optronis allows to choose between 66, 75 and 85MHz, and the setting affects the maximal fps attainable. A higher readout clock may increase the occurrence of salt-and-pepper noise, whereas it seemed, mostly on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a>, that a lower pixel clock increased the chances of loss of sync of the frame.
</div>
<div class="Unindented">
Camera configurations which dictate a frame size smaller than the sensor size (<span class="formula">1280 × 1024</span> for Basler A504k and Optronis CL600x2) can be chosen with <span class="LVcontrol">Karbon camera configuration</span>. In that case, the user can choose which part of the image collected by the sensor to use. The position of the part of the total area to be imaged is controlled by <span class="LVcontrol">ROI x offset</span><b><a class="IndexReference" name="entry-ROI-x-offset-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-x-offset">↓</a></b> and <span class="LVcontrol">ROI y offset</span><b><a class="IndexReference" name="entry-ROI-y-offset-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-y-offset">↓</a></b>, and the location of the subpart of the image used is shown in the small <span class="LVcontrol">Frame position</span><b><a class="IndexReference" name="entry-Frame-position-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Frame-position">↓</a> </b>frame. The small image is updated infrequently. [It is not possible to display also the rest of the image: doing that would require to switch the camera periodically to full frame, reinitializing the framegrabber, which is prohibitive]. The small image can also be dragged within the frame in order to change its location. Image update is slow, though, which hinders the interactivity of the control.
</div>
<div class="Remark*">
The change of some of these setting causes a pause and a reinitialization of the grabbing process. During this time, no image, or a corrupted image may be shown, while the <span class="LVcontrol">setting</span> led<a class="IndexReference" name="entry-setting-led-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-setting-led">↓</a> turns on. Reinitialization takes a couple of seconds, unless <b><span class="LVcontrol">taps</span></b> changes from 8 to 10 or viceversa. In that case, the Karbon driver causes a much longer initialization delay, and an informative message pops out. Reinitialization is indeed desirable if the camera is turned on when the program is already running, or if the “out of sync” (see Section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#remark:out-of-sync">3.1.1↑</a>) problem appears.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">camera&nbsp;framestamp</span><a class="IndexReference" name="entry-camera-framestamp-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-camera-framestamp">↓</a></span> if checked, turns on a feature of the camera, which replaces the intensity values of a few pixels in one corner of the image with status information including a 16 bit frame counter, and for the Basler, the coordinates of the subframe if the camera is delivering a subframe. The Basler camera uses the last 10 pixels of the last image line; the Optronis the first 2 pixels of the first line. See Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">software&nbsp;framestamp</span><a class="IndexReference" name="entry-software-framestamp-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-software-framestamp">↓</a></span> if checked, <span class="ProgramName">Gonzales</span> replaces the first 20 pixels of the last line with an image counter and other information (see Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>). Comparing this counter information (which depends on the software performance) in the images of a recorded movie with the previous counter can reveal lost frames. 
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">software&nbsp;timestamp</span><a class="IndexReference" name="entry-software-timestamp-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-software-timestamp">↓</a></span> if checked, <span class="ProgramName">Gonzales</span> replaces the first 8 pixels of the first line with a millisecond absolute timestamp (see Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>). The time is read from the OS clock, hence may suffer of jitter, which could be analyzed statistically.
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>camera&nbsp;setup&nbsp;status</b></span><a class="IndexReference" name="entry-camera-setup-status-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-camera-setup-status">↓</a></b></span> is an indicator which displays specific program errors in case of problems in the communication with the camera. In normal operation it should display nothing, while in case of error the message may not be that useful to the end user. In short, a debugging indicator which occupies perhaps too much screen space.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.3">3.1.3</a> Streamfile control<a class="Label" name="sub:Gonzales-Streamfile-control"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 60%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesStreamfile.png" alt="figure images/GonzalesStreamfile.png" style="max-width: 604px; max-height: 182px;">

</div>

</div>
 
</div>
<div class="Indented">
Below and by the lower right corner of the main image. The group includes controls relating to the movie file.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">streamfile</span><a class="IndexReference" name="entry-streamfile-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-streamfile-(Gonzales)">↓</a></span> is the path to the file. It is self understood that it should point to some location on the logical volume built on the RAID array. The path is emptied every time that a camera parameter is changed, to prevent any attempt of dumping to the same file image content taken with different parameters. To maximize responsiveness, the file is created and opened as soon as the path is chosen or written in. An initial header is written, in which the total frame count is set to 0. This header is then later updated with the total number of frames in the movie, when the file is closed. If another file is chosen before anything is recorded, the first file is automatically erased. If opening or writing fail for any reason (e.g., non-existing path), the led at the right of the control changes to “<i><span class="ControlValue">Error</span></i>”, instead of “<span class="ControlValue">file ok</span>”.
</div>
<div class="--Separator--">

</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">open&nbsp;file&nbsp;button</span><a class="IndexReference" name="entry-open-file-button-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-open-file-button-(Gonzales)">↓</a></span> Though not so intuitive for the casual user, it is possible to close the file, releasing its lock and allowing the file to be read by another program, e.g. <b><span class="ProgramName">ImageReader</span></b>. The file can then be reopened to resume writing, appending content. I would not recommend working this way because it may lead to confusion (ending in writing and reading different files at the same time and thus degrading throughput), but the feature is there.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">description&nbsp;text</span><a class="IndexReference" name="entry-description-text-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-description-text-(Gonzales)">↓</a></span> is free text written in the header of the file (on write, it is truncated to 458 characters). The text can be modified as long as the file is open, because the header gets rewritten at the end of the recording.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">images&nbsp;written</span><a class="IndexReference" name="entry-images-written-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-images-written">↓</a></span> is a counter of images recorded.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">time&nbsp;recorded</span><a class="IndexReference" name="entry-time-recorded-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-time-recorded">↓</a></span> reports the recording time (assuming no frame loss, i.e. reporting fps*images&nbsp;written). To avoid unnecessary screen activity, the indicator is updated periodically every 10ms and not for every frame written.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">#images&nbsp;to&nbsp;record</span><a class="IndexReference" name="entry-number-of-images-to-record-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-number-of-images-to-record">↓</a></span> In order to prevent the recording to go on forever, a maximal number of frames can be specified. When the filename changes and a new streamfile is opened, the default is to keep the previous number if <span class="LVcontrol">progressive files</span><b><a class="IndexReference" name="entry-progressive-files-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-progressive-files">↓</a></b> is on (see below section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↓</a>), otherwise the number is set to the maximum, computed according to the disk space available.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">total&nbsp;recording&nbsp;time</span><a class="IndexReference" name="entry-total-recording-time-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-total-recording-time">↓</a></span> reports the expected duration of the recording (assuming no frame loss), based on the current values of <span class="LVcontrol">fps</span> and <span class="LVcontrol">#images&nbsp;to&nbsp;record</span>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.4">3.1.4</a> Recording control<a class="Label" name="sub:Recording-controls"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 25%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesRecording.png" alt="figure images/GonzalesRecording.png" style="max-width: 314px; max-height: 290px;">

</div>

</div>
 This group comprises controls which, loosely said, determine how and when the streamfile is written.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Write&nbsp;to&nbsp;file</span><a class="IndexReference" name="entry-Write-to-file-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Write-to-file">↓</a></span> This is the button which the user presses on the GUI to initiate recording (i.e., to cause the images that are <i>continuously grabbed</i> to be <i>actually written</i> to the streamfile). The button is disabled if no streamfile path has been selected, if the file is momentarily closed, if there is a file error, etc. The writing status is evidenced by the red led at its right. Writing can be suspended by pressing again on the button.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">writing&nbsp;led</span><a class="IndexReference" name="entry-writing-led-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-writing-led">↓</a></span> This led changes from <span class="ControlValue">standby</span> (dark green) to <span class="ControlValue">REC</span> when recording is actually taking place. The led is greyed out when recording is impossible, for instance when no <span class="LVcontrol">streamfile</span><a class="IndexReference" name="entry-streamfile-(Gonzales)-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-streamfile-(Gonzales)">↓</a> has been defined and opened.
</div>
<div class="Unindented">
Writing can also be caused to turn on and off automatically, in which case the button toggles by itself depending on what is happening. In addition, writing stops automatically when approximately <span class="LVcontrol">#images&nbsp;to&nbsp;record</span><b><a class="IndexReference" name="entry-number-of-images-to-record-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-number-of-images-to-record">↓</a></b> have been written. [Approximately, because the checking mechanism involves different threads which are by implementation asynchronous]. The following controls determine the automatism:
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">write&nbsp;if&nbsp;trigger</span><a class="IndexReference" name="entry-write-if-trigger-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-write-if-trigger">↓</a></span> writing turns and stays on as long as a TTL trigger is 1 on the digital input specified in the Hotspots and Triggers tab (see below section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Hotspots">3.1.8↓</a>)
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">write&nbsp;if&nbsp;present&nbsp;in&nbsp;self</span><a class="IndexReference" name="entry-write-if-present-in-self-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-write-if-present-in-self">↓</a></span> is only active if <span class="LVcontrol">self tracking</span><b><a class="IndexReference" name="entry-self-tracking-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-self-tracking">↓</a></b> is turned on. The yellow led at its right shows when the “self” condition is on. [CHECK--maybe if <span class="LVcontrol">self tracking</span> is off, it simply dumbs down to write-if-difference-in-ROI, and is still enabled]
</div>
<div class="Unindented">
If any of the two controls above is turned on, the button <span class="LVcontrol">Write&nbsp;to&nbsp;file</span> is disabled, intending by that that the starting or stopping the recording is delegated to the triggers and no more an user choice.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">pretrigger&nbsp;time</span><a class="IndexReference" name="entry-pretrigger-time-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-pretrigger-time">↓</a></span> determines how many images preceding the write command are written to the disk, and how many images <i>before</i> the stop command are omitted from the end of the stream. [The two numbers should perhaps be separated, and posttrigger should also be allowed, but since interest for the feature after the initial request seemed low, I omitted the implementation]. Pretriggering is made possible by the fact that, by design, the images which are continuously grabbed are stored in a ringbuffer, while reference to them together with a flag signaling if they are to be written is to the disk is stored in a queue; a separate thread cares for dequeuing and actual writing. It is sufficient to choose to write an image from the ringbuffer a number of positions behind the last one in queue, when the writing flag appears in the element dequeued, in order to achieve pretrigger recording. The number of images written, preceding the trigger event, is simply <span class="formula"><i>t</i><sub><i>pretrigger</i></sub></span>/fps. The exactness of the feature depends on the responsiveness of an event checking thread, and is therefore subjected to OS timing jitter. The maximum pretrigger time is <span class="formula"><i>N</i><sub><i>ring</i></sub> ⁄ <i>fps</i></span>, where <span class="formula"><i>N</i><sub><i>ring</i></sub> = 400</span> hardwired in the program.
</div>
<div class="Description">
<span class="Description-entry"><b><span class="LVcontrol"><b>#images&nbsp;in&nbsp;queue</b></span><a class="IndexReference" name="entry-number-of-images-in-queue-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-number-of-images-in-queue">↓</a></b></span> Related to the writing process, the indicator <span class="LVcontrol">#images&nbsp;in&nbsp;queue</span> reports the number images which have been grabbed but not yet been written to the disk, and wait in a queue. In normal conditions, this indicator should show an empty queue, or a queue which fills in small bursts which are rapidly disposed of. Abnormal conditions like high system load, disk failures or the like cause the queue to fill rapidly as writing stays behind; images older than the queue size are lost as the ringbuffer is overwritten circularly. If a pretrigger time larger than zero is used, the effective headroom decreases, because it is both required that the image is still in the ringbuffer and that the relative reference, including the write flag is still in the queue. The queue size is currently 400 elements long as much as the ringbuffer size is, but that is in fact a limitation which could be very easily lifted, at insignificant memory cost.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">progressive&nbsp;files</span><a class="IndexReference" name="entry-progressive-files-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-progressive-files">↓</a></span> when on, files are automatically “sequenced”. That means that whenever recording stops (either because the user presses the button or automatically), a new file is created and opened; if the name ended with non-numeric characters then <tt>_1</tt> is appended to the name, and if the name ends with a number, that number is incremented. <span class="ProgramName">ImageReader</span> also refers to files named according to this scheme as “sequenced”. When off, images are appended to the opened streamfile, as long as it is not changed. Than means, that if writing goes on and off and then on again, discontinuous pieces of movie will be consecutive in the streamfile (perhaps discernible by frame or timestamps). This may be wanted or not, the choice is to the user. Closing files and creating new may have a small (tens of milliseconds) OS overhead, so perhaps <span class="LVcontrol">progressive&nbsp;files</span> off would be preferable if very short off intervals are to be expected. I doubt that the case had practical relevance so far, though.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">ROI&nbsp;write</span><a class="IndexReference" name="entry-ROI-write-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-write">↓</a></span> only the portion of the image enclosed by the first ROI is written to the file.
</div>
<div class="Remark*">
While the file size may be considerably smaller than when streaming the full frame, the fps attainable remains the same of the bigger image, which has to be grabbed in any event. To achieve a faster frame rate at the expense of image size, the user may want instead to switch to a different Karbon configuration. The <span class="LVcontrol">ROI write</span> button, though, allows the streaming of subimages of arbitrary size, which can be changed on the fly. Moreover, <span class="LVcontrol">ROI write</span> can be used in conjunction with <span class="LVcontrol">self tracking</span> described below, with truly emetic effects for the viewer.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">self&nbsp;tracking</span><a class="IndexReference" name="entry-self-tracking-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-self-tracking">↓</a></span> determines if Self Tracking is activated. The functionality is described below in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Self-Tracker">3.1.7↓</a>. The button is relevant to streaming too, because if self&nbsp;tracking is on:
</div>
<ul>
<li>
the condition <span class="LVcontrol">write&nbsp;if&nbsp;present&nbsp;in&nbsp;self</span> can be activated;
</li>
<li>
if <span class="LVcontrol">ROI write</span> is on, the (single) ROI of the main image is adjusted dynamically, following the centroid of the detected blob and preserving its size. The intended effect is that the movie records a subimage, which tracks a single moving object detected in the larger frame. The limitation is that blob analysis needs some tens of milliseconds to be computed, hence the ROI position can be updated only every several frames when acquiring at high speed, and the resulting effect is rather jerky.
</li>

</ul>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.5">3.1.5</a> Tabs
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 30%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesTabs.png" alt="figure images/GonzalesTabs.png" style="max-width: 317px; max-height: 32px;">

</div>

</div>
A wealth of additional diagnostic information, as well as configuration which does not need to be constantly observed by the user, has been organized in tabbed pages in order to economize screen space. Tabs are switched to by clicking on their labels on top of the page.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.6">3.1.6</a> the Streaming statistics tab
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesStreamingStatistics.png" alt="figure images/GonzalesStreamingStatistics.png" style="max-width: 447px; max-height: 759px;">

</div>

</div>
 This tab shows a lot of statistic information about the enqueuing of images grabbed and waiting to be written, which is important for debugging and troubleshooting anomalous conditions, but less useful for the normal use. The indicators in this tab cause a lot of video activity, which increases the jitter in all timings. Because of that, there is a switch <b><a class="IndexReference" name="entry-Visible-stat-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Visible-stat">↓</a>Visible stat</b> in the upper right corner, with a caption encouraging the user to keep it off. In the off position, all indicators but <b>first&nbsp;frame&nbsp;in&nbsp;movie</b> and <b>lost&nbsp;frames</b> (if supported) are made invisible. [In fact, having this tab open with <b>Visible stat</b> off is the position causing the least video activity among the three tab options].
</div>
<div class="Indented">
The meaning of the indicators is the following:
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-trigger-check-interval-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-trigger-check-interval">↓</a>trigger&nbsp;check&nbsp;interval</span> reports the time in milliseconds needed for one iteration of the loop, in a separate thread, which scans the DAQ inputs and checks for changes in the triggers.
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-Acquired-frame-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Acquired-frame">↓</a>Acquired&nbsp;frame</span> the progressive number of the frame grabbed, starting from 0 at reinitialization. Should increase continuously at rate <span class="formula"><i>fps</i></span>, as long as the camera is on.
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-backlog-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-backlog">↓</a>backlog</span> number of images which have already been grabbed but not yet written. Should be 0 or very small.
</div>
<div class="Description">
<span class="Description-entry"><b><a class="IndexReference" name="entry-first-frame-in-movie-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-first-frame-in-movie">↓</a>first&nbsp;frame&nbsp;in&nbsp;movie</b></span> the frame number displayed by <b>Acquired&nbsp;frame</b> at the moment the recording is started.
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-grab-fps-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-grab-fps">↓</a>grab&nbsp;fps</span> an estimate of the fps based on the average timing of iterations of the grabbing loop. Should coincide with the camera <b>fps</b> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-settings-frame">3.1.2↑</a>), but can fluctuate around it especially if the system is loaded. A value significantly lower than <b>fps</b> means that the computer is not able of grabbing all of the images delivered by the camera, or that the camera is not behaving as expected.
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-write-loop-fps-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-write-loop-fps">↓</a>write&nbsp;loop&nbsp;fps</span> an estimate of the fps based on the average timing of iterations of the write-to-disk loop. Should coincide with the camera <b>fps</b> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-settings-frame">3.1.2↑</a>) and with the <b>grab&nbsp;fps</b>, but can fluctuate around them especially if the system is loaded. A value significantly lower than <b>fps</b> means, if recording is active, that the computer is not able to write the images to the disk as fast as they come in, and will be associated most likely with a filled queue and overwritten ringbuffer (described above in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>); if recording is off, it may indicate some odder problem.
</div>
<div class="--Separator--">

</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-lost-frames-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-lost-frames">↓</a>lost&nbsp;frames</span> indicates the number of frames produced by the camera since the last reinitialization, which the computer did <i>not</i> pass to the writing loop (either because problems in grabbing or in writing) and which were therefore lost. The count is possible only if <b>camera&nbsp;framestamp</b> is checked, since there is information about the number of frames from both sources. The number should be 0 as long as the process is regular. If the image queue fills up, the <b>lost&nbsp;frames</b> count will increase in multiples of the ringbuffer size, i.e. 400. If the camera “looses sync”, the number will be meaningless, because the pixels which should contain the camera framestamp will not be in the right position on the received image. The counter provided by the camera is only a 16 bit one, so in principle the number of lost frames wraps around 65536. 
</div>
<div class="Description">
<span class="Description-entry"><a class="IndexReference" name="entry-time-loss-percent-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-time-loss-percent">↓</a>time&nbsp;loss&nbsp;%</span> an estimate of the percentage of lost images, based on the comparison between the average timing of the iterations of the write loop and <span class="formula">1 ⁄ <i>fps</i></span>. Never an exact value due to OS timing jitter, it should normally be around 0% (even negative). Values below 1% are the normal condition. The computation is based on an average of the last 1000 iterations, and can therefore be wrong for the first few seconds after <b>fps</b> is changed.
</div>
<div class="Description">
<span class="Description-entry">dt&nbsp;histogram<a class="IndexReference" name="entry-dt-histogram-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-dt-histogram">↓</a></span> a histogram of the distribution of timings of the last 1000 iterations of the writing loop. It should normally be peaked around <span class="formula">1 ⁄ <i>fps</i></span>, taking into account that the timing has 1ms granularity. The delay-tolerant design of the loop allows delays to accumulate in some iterations of the loop, which are then compensated by a faster successive iteration. This results in wider peaks of the histogram, with the appearance of both longer and shorter sampled values of the timing. The histogram in particular widens under heavier load, e.g. increased screen activity.
</div>
<div class="Description">
<span class="Description-entry">loss&nbsp;log<a class="IndexReference" name="entry-loss-log-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-loss-log">↓</a></span> charted history of the <b>time&nbsp;loss&nbsp;%</b>
</div>
<div class="Description">
<span class="Description-entry">queue&nbsp;log<a class="IndexReference" name="entry-queue-log-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-queue-log">↓</a></span> charted history of <b>#images&nbsp;in&nbsp;queue described </b>above in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.7">3.1.7</a> the Self Tracker tab<a class="Label" name="sub:the-Self-Tracker"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesSelftracking.png" alt="figure images/GonzalesSelftracking.png" style="max-width: 436px; max-height: 813px;">

</div>

</div>

</div>
<div class="Indented">
Self-tracking was a feature introduced tentatively in earlier versions of Gonzales, which as of itself has probably not been exploited much in experimental use. The feature has been preserved until now, and some parts of it are still relevant, hence they are described here.
</div>
<div class="Indented">
Self-tracking implies that a reference “background” image<a class="IndexReference" name="entry-reference-background-image-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-reference-background-image-(Gonzales)">↓</a> is taken; then, as often as possible the grabbed image is compared to the reference, and if a significant difference is found, the coordinates of the centroid of the detected object are used further. The feature can be meaningful if there is a single object to be tracked within a larger arena imaged; it is much less if there are many objects, or if the object is complex, not completely imaged, or with a size comparable to the area of the image.
</div>
<div class="Indented">
For self-tracking, the absolute difference between the most recent grabbed image and the reference is computed; the result is then binarized setting to 1 all pixels with intensity between two thresholds, and this result is morphologically eroded in order to remove isolated pixels. On a single thread, the image processing task may require times of the order of <span class="formula">10÷20</span>ms (depending on image size and content), and hence, at high fps, it is repeated whenever possible and not on each image grabbed. The controls in the tab relate to this process. In detail:
</div>
<div class="Description">
<span class="Description-entry">selftracking&nbsp;delay<a class="IndexReference" name="entry-selftracking-delay-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-selftracking-delay">↓</a></span> reports the time in ms needed for the last iteration of the image processing loop
</div>
<div class="Description">
<span class="Description-entry">take&nbsp;as&nbsp;reference<a class="IndexReference" name="entry-take-as-reference-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-take-as-reference">↓</a></span> stores the last image grabbed as reference background. This image is also used as reference for the Hotspots functionalities (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Hotspots">3.1.8↓</a>).
</div>
<div class="Description">
<span class="Description-entry">auto&nbsp;update&nbsp;ref<a class="IndexReference" name="entry-auto-update-ref-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-auto-update-ref">↓</a></span> if on, the reference image is updated periodically. Supposed to be useful for experiments in which the background may occasionally change (objects in the field of view are displaced, illumination changes)
</div>
<div class="Description">
<span class="Description-entry">every<a class="IndexReference" name="entry-every-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-every-(Gonzales)">↓</a></span> period of update of the background, if <b>auto&nbsp;update&nbsp;ref</b> is on
</div>
<div class="Description">
<span class="Description-entry">reference&nbsp;image<a class="IndexReference" name="entry-reference-image-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-reference-image-(Gonzales)">↓</a></span> a display of the reference image, once stored. The image can be zoomed in and out with the lupe tool, and has a contextual right button menu (as provided by the standard LV image widget).
</div>
<div class="--Separator--">

</div>
<div class="Description">
<span class="Description-entry">thresholded&nbsp;self<a class="IndexReference" name="entry-thresholded-self-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-thresholded-self">↓</a></span> the binary image resulting from the absolute difference of the grabbed image and the reference, thresholded and eroded. If <b>self&nbsp;tracking</b> (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>) is on, a ROI, as big as the (single) ROI defined in the main image is drawn, and its center is moved so to track the centroid of the white pixels in this image. The same ROI rectangle is also adjusted dynamically in the main image.
</div>
<div class="Description">
<span class="Description-entry">Lower&nbsp;threshold<a class="IndexReference" name="entry-Lower-threshold-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Lower-threshold-(Gonzales)">↓</a></span> the minimal intensity value of the difference image to be treated as white.
</div>
<div class="Description">
<span class="Description-entry">Upper&nbsp;threshold<a class="IndexReference" name="entry-Upper-threshold-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Upper-threshold-(Gonzales)">↓</a></span> the maximal intensity value of the difference image to be treated as white. Usually set to 255.
</div>
<div class="Description">
<span class="Description-entry">erosions<a class="IndexReference" name="entry-erosions-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-erosions-(Gonzales)">↓</a></span> The number of morphological erosions applied to the difference image. A higher value removes larger objects, but increases the image processing time.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.8">3.1.8</a> the Hotspots &amp; Triggers tab<a class="Label" name="sub:the-Hotspots"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesHotspots.png" alt="figure images/GonzalesHotspots.png" style="max-width: 450px; max-height: 814px;">

</div>

</div>

</div>
<div class="Indented">
A quite dense panel, concentrating various configuration functions. The panel deals with:
</div>
<ol>
<li>
Detection of activity in the ROIs (the <i>Hotspots</i><a class="IndexReference" name="entry-Hotspots-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Hotspots">↓</a>) defined in the main image, and computation of logic functions involving them (<b>Formulas<a class="IndexReference" name="entry-Formulas-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Formulas-(Gonzales)">↓</a></b>)
</li>
<li>
Configuration of an UDP listener service, allowing other programs on the same computer or on a computer across the network to send commands to <b>Gonzales</b> while it runs (<b>UDP remote commanding</b><a class="IndexReference" name="entry-UDP-remote-commanding-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-UDP-remote-commanding">↓</a>)
</li>
<li>
Configuration of a service sending event messages to an external logger, potentially listening via UDP (<b>UDP reporting</b><a class="IndexReference" name="entry-UDP-reporting-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-UDP-reporting">↓</a>)
</li>
<li>
Routing of digital triggers, to which <b>Gonzales</b> reacts or which <b>Gonzales</b> generates, to the available ports of eventual DI/O cards (<b>Digital lines routing</b><a class="IndexReference" name="entry-Digital-lines-routing-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Digital-lines-routing">↓</a>)
</li>

</ol>
<div class="Unindented">
The description of each group follows in the next paragraphs.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.9">3.1.9</a> Formulas<a class="Label" name="sub:Formulas"> </a>
</h3>
<div class="Unindented">
<div class="wrap-l" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesFormulas.png" alt="figure images/GonzalesFormulas.png" style="max-width: 436px; max-height: 253px;">

</div>

</div>

</div>
<div class="Indented">
One or more rectangular ROIs can be drawn on the main image window. When they are, the the values of the pixels inside them are constantly monitored, and can serve as basis for logic operations, such as sending flagging messages to an external logger when some condition is met, turn on the recording of a movie, change the status of a digital trigger.
</div>
<div class="Indented">
For each ROI defined, the content of the ROI is subtracted from the corresponding pixels in the reference image<a class="IndexReference" name="entry-reference-background-image-(Gonzales)-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-reference-background-image-(Gonzales)">↓</a> (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Self-Tracker">3.1.7↑</a>); the average of the absolute value of the difference is referred to as the <b>R value</b><a class="IndexReference" name="entry-R-value-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-R-value">↓</a>, and displayed numerically as an overlay to the main image.
</div>
<div class="Indented">
Boolean formulas can then be written using any of the R values, and entered in the cluster array <b>Formulas<a class="IndexReference" name="entry-Formulas-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Formulas">↓</a></b>. The standard Labview Array widget behavior applies; undefined elements are greyed out, elements can be inserted or deleted with right-click menu entries, and so on. Each formula cluster element has four field: <b>label</b><a class="IndexReference" name="entry-formula-label-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-formula-label">↓</a>, <b>formula</b>, <b>syntax<a class="IndexReference" name="entry-formula-syntax-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-formula-syntax">↓</a></b> and <b>result</b><a class="IndexReference" name="entry-formula-result-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-formula-result">↓</a>.
</div>
<div class="Indented">
In the formulas, the constants<tt> <span class="code"><tt>true,TRUE, false, FALSE</tt></span></tt> and the operators <tt><span class="code"><tt>AND, and, &amp;&amp;, OR, or, ||, NOT, not, !, eq, ==, ne, !=, lt, &lt;, gt, &gt;, le, &lt;=, ge, &gt;=</tt></span></tt> can be used, in addition to arithmetic operations between numbers and parentheses; the result of the formula must be logic and not numeric. The <i>only</i> variables which can be used are <tt><span class="code"><tt>R1, R2</tt></span></tt>,... as long as the corresponding ROIs are defined. E.g. an expression like <tt><span class="code"><tt>((R1+20)&gt;50) and ((R2&lt;100) or (R3&gt; R1))</tt></span></tt> is a legal formula. Note that, as with any Labview string entry control, the formula is effectively entered only when the key Enter is pressed, or focus is moved to another control.
</div>
<div class="Indented">
A syntactically wrong formula is flagged by the indicator <b>syntax</b> in the formula cluster becoming red. A formula involving symbols other than the few R active is considered syntactically wrong, and sometimes arithmetic operations have to be surrounded by extra parentheses. Note that syntax parsing is really minimal, and invalid expressions like e.g. <tt><span class="red"><span class="code"><tt></tt><span class="red">(false (** &amp; 66 %~</span></span></span></tt> can appear as valid. The evaluation is performed by a very simple underlying parsing engine which I found on a technical forum, <a class="URL" href="https://decibel.ni.com/content/docs/DOC-13186">https://decibel.ni.com/content/docs/DOC-13186</a>. The engine is nor fast nor sophisticated, but it was the best available.
</div>
<div class="Indented">
The formula cluster has an additional input field <b>label</b>, which can be used as mnemonic, and an indicator of the <b>result</b> of the evaluation. The Formulas are evaluated as frequently as possible on the last image available, but the evaluation is asynchronous with respect to grabbing. The evaluation of the formulas takes usually a few milliseconds, time which is reported in <b>hotspot extraction time</b><a class="IndexReference" name="entry-hotspot-extraction-time-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-hotspot-extraction-time">↓</a>.
</div>
<div class="Indented">
For reasons which are more historical than anything, the <b>Formulas</b> are evaluated only if the <b>Hotspot</b><a class="IndexReference" name="entry-Hotspot-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Hotspot">↓</a> button (described in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Gonzales-Main-image">3.1.1↑</a>) is turned on. Otherwise, they always evaluate as <i>false</i> for all practical purposes.
</div>
<div class="Indented">
Both the coordinates of all ROIs defined and the formulas can be saved in a plain text file and reloaded, using the <b>Save&nbsp;ROI&nbsp;logic</b><a class="IndexReference" name="entry-Save-ROI-logic-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Save-ROI-logic-(Gonzales)">↓</a> and <b>Load&nbsp;ROI&nbsp;logic</b><a class="IndexReference" name="entry-Load-ROI-logic-(Gonzales)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Load-ROI-logic-(Gonzales)">↓</a> buttons.
</div>
<div class="Indented">
The result of one among the formulas defined can be used to control the recording of movies. The controlling formula is chosen with <b>Formula&nbsp;to&nbsp;Write&nbsp;to&nbsp;file</b><a class="IndexReference" name="entry-Formula-to-Write-to-file-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Formula-to-Write-to-file">↓</a>. The action selected by <b>optical&nbsp;Write&nbsp;to&nbsp;file&nbsp;mode<a class="IndexReference" name="entry-optical-Write-to-file-mode-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-optical-Write-to-file-mode">↓</a></b> can be either <i>no action</i> (nothing happens), <i>Write as long as True</i>, or <i>Start when becoming True</i>. The action is equivalent to pressing the <b>Write&nbsp;to&nbsp;file</b><a class="IndexReference" name="entry-Write-to-file-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Write-to-file">↓</a> button (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>). Note that the last two options may cause conflicts with other automatic or triggered ways of starting or stopping the recording.
</div>
<h4 class="Subsubsection">
<a class="toc" name="toc-Subsubsection-3.1.9.1">3.1.9.1</a> UDP commanding
</h4>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesUDPcommanding.png" alt="figure images/GonzalesUDPcommanding.png" style="max-width: 434px; max-height: 94px;">

</div>

</div>

</div>
<div class="Indented">
A powerful and potentially disruptive feature of <b>Gonzales</b> since version 10 is that the values of many controls and indicators can be changed by an external program sending a suitable command string to a particular UDP port of the computer running <b>Gonzales</b>. Uses of this feature can be a lot: starting/stopping the recording by command, changing the movie pathname, resetting the background image, changing the image format, and more. The controls which can be commanded at the moment of writing are all those displaying a single numeric value, a string, a logic value, as well as rings and pulldown menus.
</div>
<div class="Indented">
In order to change a value, <b>Gonzales</b> has to receive on the <b>Local in port<a class="IndexReference" name="entry-Local-in-port-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Local-in-port">↓</a></b> an UDP datagram terminated by a newline, with the format
</div>
<pre class="LyX-Code">set “control name” value
</pre>
<div class="Unindented">
The name of the control, <tt>control&nbsp;name</tt>, is the internal name in Gonzales. In most cases it coincides with the label of the control on the front panel, but sometimes it doesn’t, if for UI clarity the caption of the control has set to something different (e.g.: the control labeled <b>present&nbsp;in&nbsp;self</b> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>) has the internal name <tt>write&nbsp;if&nbsp;self</tt>).
</div>
<div class="Indented">
Boolean controls can be changed with <tt>value</tt> equal to <tt>True</tt> or <tt>False</tt> (case ignored).
</div>
<div class="Indented">
Examples:
</div>
<pre class="LyX-Code">set “take as reference” true
set “write to file” TRUE
set “pixel clock” 1
set “ROI y offset” 32
set “streamfile” F:\test1\streamtest_new
</pre>
<div class="Unindented">
Note that parsing of the command is very crude—extra words between <tt>set</tt> and quotes are ignored, and only the first letter <tt>t</tt> or <tt>f</tt> is taken into account for booleans. Hence even this would work:
</div>
<pre class="LyX-Code">set ohy ohi “camera framestamp” trumpatrumpatretre
</pre>
<div class="Unindented">
As the controls in Gonzales are too many, I won’t provide here the full list of their current internal names; in case someone needs a specific one, which differs from the displayed label, look it up in the code or ask.
</div>
<div class="Indented">
The feature can be quite disruptive if used without criterion, or if a malignous entity sends inconsiderate commands across the network, as no consistency check is done on the values changed and on their sequence. To provide a really minimal level of security, the checkbox <b>Allow<a class="IndexReference" name="entry-Allow-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Allow">↓</a></b> has to be tagged in order to enable the feature. As a matter of fact, even the values of the indicators can be changed with the same mechanism, though <b>Gonzales</b> will in most cases rewrite these values by itself shortly thereafter.
</div>
<div class="Description">
<span class="Description-entry">command&nbsp;line<a class="IndexReference" name="entry-command-line-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-command-line">↓</a></span> will show the last newline-terminated command received by Gonzales.
</div>
<div class="Description">
<span class="Description-entry">command&nbsp;accepted<a class="IndexReference" name="entry-command-accepted-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-command-accepted">↓</a></span> turns and stays green if the last command was syntactically correct [<i>which does not imply that the value changed is legal</i>]
</div>
<div class="Description">
<span class="Description-entry">UDP&nbsp;in&nbsp;status<a class="IndexReference" name="entry-UDP-in-status-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-UDP-in-status">↓</a></span> becomes red if the chosen <b>Local in port</b> is not available, e.g. is it already in use by some other service.
</div>
<h4 class="Subsubsection">
<a class="toc" name="toc-Subsubsection-3.1.9.2">3.1.9.2</a> UDP reporting
</h4>
<div class="Unindented">
When certain events happen, a timestamped report message is generated and delivered trough UDP. The main use intended with that is to report conditions to an external logger sitting somewhere on the local computer or across the network and listening onto a specific port. In the behavioral setup, <span class="ProgramName">BEst</span> includes this functionality. UDP is chosen as protocol because of its simplicity and because of its independence on an actual listener.
</div>
<div class="Indented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesUDPreporting.png" alt="figure images/GonzalesUDPreporting.png" style="max-width: 431px; max-height: 115px;">

</div>

</div>

</div>
<div class="Indented">
Events which are reported are: the start and the stop of a recording; the change of result of a formula (hotspot <i>on</i> or <i>off</i>); the change of state of the trigger line. If the event happens while <span class="ProgramName">Gonzales</span> is recording a movie, the current filename and frame number (with some inaccuracy due to the asynchronism of the involved threads) are also reported.
</div>
<div class="Indented">
Relevant controls are:
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Host&nbsp;reported&nbsp;to</span><a class="IndexReference" name="entry-Host-reported-to-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Host-reported-to">↓</a></span> the UDP message is directed to a specific receiver on a host [it could be sent in broadcast mode, instead; the change in the program would be trivial]. The address can be given as IP or as hostname. Use <tt>localhost</tt> if the message is to be used by a logger (e.g. <b>Best</b>) on the same computer.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Local&nbsp;out&nbsp;port</span><a class="IndexReference" name="entry-Local-out-port-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Local-out-port">↓</a></span> the UDP port used for sending out the report message. Number between 0 and 65535, taking into account that many ports are already used by default by system services. It can’t coincide with <span class="LVcontrol">Local&nbsp;in&nbsp;port</span><b><a class="IndexReference" name="entry-Local-in-port-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Local-in-port">↓</a></b> used for UDP commanding.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Remote&nbsp;in&nbsp;port</span><a class="IndexReference" name="entry-Remote-in-port-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Remote-in-port">↓</a></span> the UDP port on which the receiver is listening for messages. If <span class="LVcontrol">Host&nbsp;reported&nbsp;to</span> is the same computer on which <span class="ProgramName">Gonzales</span> is run, it can’t coincide with <span class="LVcontrol">Local&nbsp;out&nbsp;port</span>, nor with the port used by another system service.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">datagram</span><a class="IndexReference" name="entry-datagram-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-datagram">↓</a></span> displays the text of the last report message issued.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">UDP&nbsp;out&nbsp;status</span><a class="IndexReference" name="entry-UDP-out-status-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-UDP-out-status">↓</a></span> will show error if there is any problem in the definition of the <span class="LVcontrol">Local&nbsp;out&nbsp;port</span>, for instance if a duplicate number is used.
</div>
<h4 class="Subsubsection">
<a class="toc" name="toc-Subsubsection-3.1.9.3">3.1.9.3</a> Digital routing
</h4>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesRouting.png" alt="figure images/GonzalesRouting.png" style="max-width: 435px; max-height: 282px;">

</div>

</div>

</div>
<div class="Indented">
This tab determines how triggers are read from hardware inputs and how logical conditions are dispatched to digital outputs. The scheme works as long as one or more National Instruments DAQ cards with digital input/output ports are connected to the system. The feature is important for interfacing the recording system with external electronic hardware. It has to be kept in mind that the generation and the polling of digital signals in Gonzales is done entirely in software, and hence not absolutely reliable for timing. The jitter observed, though, seem to amount to a few milliseconds.
</div>
<div class="Indented">
The controls in this group are:
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Write&nbsp;trigger&nbsp;line&nbsp;(IN)</span><a class="IndexReference" name="entry-Write-trigger-line-(IN)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Write-trigger-line-(IN)">↓</a></span> the digital port which triggers <span class="ProgramName">Gonzales</span> to write a movie, when <span class="LVcontrol">write if trigger</span><b><a class="IndexReference" name="entry-write-if-trigger-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-write-if-trigger">↓</a></b> is turned on (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Gonzales-Streamfile-control">3.1.3↑</a>). This is equivalent to keep the <span class="LVcontrol">Write to file</span><a class="IndexReference" name="entry-Write-to-file-2" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Write-to-file">↓</a> button <span class="ControlValue">ON</span> as long as the trigger line is in TTL state 1. The state of this line is reflected in the <span class="LVcontrol">write trigger led</span><a class="IndexReference" name="entry-write-trigger-led-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-write-trigger-led">↓</a> among the recording controls (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>).<br>
For this and for the similar controls in this section, any suitable port from the DAQ card or cards connected to the system can be chosen; ports can be chosen from different cards, the only limitation being that the same port is not assigned to more than one function. The control is the standard NI-DAQ widget; the name of the port can be typed in in the format Device/port/line, or chosen from a browse… menu. The entry can be left blank, or point to a non-existing port if a DAQ device is not present; the feature of <span class="ProgramName">Gonzales</span> simply won’t function, without affecting the rest of the operation.
</div>
<div class="--Separator--">

</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Event&nbsp;trigger&nbsp;line&nbsp;(IN)</span><a class="IndexReference" name="entry-Event-trigger-line-(IN)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Event-trigger-line-(IN)">↓</a></span> the program also monitors a second port. Its state doesn’t affect any function of <b><span class="ProgramName">Gonzales</span></b>, except for the fact that transitions generate an UDP logging message. The purpose of the input is to allow the logging of additional hardware events, which are reported with a message which includes the name and the frame of the file currently being recorded.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">trigger</span><a class="IndexReference" name="entry-event-trigger-led-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-event-trigger-led">↓</a></span> is a led which reflects the state of <span class="LVcontrol">Event&nbsp;trigger&nbsp;line&nbsp;(IN)</span>.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">line&nbsp;IN&nbsp;status</span><a class="IndexReference" name="entry-line-IN-status-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-line-IN-status">↓</a></span> shows Error if there is any problem in the definition or the operation of the digital input lines—such as card not present, port already in use or duplicate definition.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Hots</span><a class="IndexReference" name="entry-Hots-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Hots">↓</a></span> An array of LEDs which reflects the <span class="LVcontrol">result</span><b><a class="IndexReference" name="entry-formula-result-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-formula-result">↓</a></b> LEDs of the <span class="LVcontrol">Formulas</span><b><a class="IndexReference" name="entry-Formulas-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Formulas">↓</a></b> array (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Formulas">3.1.9↑</a>). Repeated in this frame for convenience.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">routing&nbsp;(OUT)</span><a class="IndexReference" name="entry-routing-(OUT)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-routing-(OUT)">↓</a></span> The result of each of the <span class="LVcontrol">Formulas</span> defined above can be assigned to a digital line. The control allows to select them.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">Write&nbsp;repeat&nbsp;line&nbsp;(OUT)</span><a class="IndexReference" name="entry-Write-repeat-line-(OUT)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Write-repeat-line-(OUT)">↓</a></span> a digital output line of the DAQ card whose state reflects that of the <span class="LVcontrol">writing&nbsp;led</span><a class="IndexReference" name="entry-writing-led-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-writing-led">↓</a> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>). The hardware signal can be used to signal that a recording started either by an user action or by a software condition has begun or ended; if the recording is triggered by <span class="LVcontrol">Write&nbsp;trigger&nbsp;line&nbsp;(IN)</span> instead, the time lag between the changes in state of the two can be used to monitor the response time of <span class="ProgramName">Gonzales</span>.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">line&nbsp;OUT&nbsp;status</span><a class="IndexReference" name="entry-line-OUT-status-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-line-OUT-status">↓</a></span> shows Error if there is any problem in the definition or the operation of the digital output lines, analogously to <span class="LVcontrol">line&nbsp;IN&nbsp;status</span>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.1.10">3.1.10</a> Session control
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 10%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/GonzalesSessionControl.png" alt="figure images/GonzalesSessionControl.png" style="max-width: 105px; max-height: 129px;">

</div>

</div>
 <b>The correct way to terminate the program is always by clicking on the <span class="LVcontrol"><b>Quit button</b></span><a class="IndexReference" name="entry-Quit-button-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Quit-button">↓</a></b>. Attempts to stop it differently, like by pressing on the stop button on the Labview Toolbar (an action which is left for emergency stops and troubleshooting), will most likely leave some camera resources busy, and will need quitting labview (or altogether killing the process from OS) in order to resume operation.
</div>
<div class="Indented">
The program saves all the values of the controls at normal exit, and reloads them at the beginning of a new session. Configuration files can also be saved and loaded on demand, and this is what the buttons <span class="LVcontrol">load&nbsp;configuration</span><b><a class="IndexReference" name="entry-load-configuration-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-load-configuration">↓</a></b> and <span class="LVcontrol">save&nbsp;configuration</span><b><a class="IndexReference" name="entry-save-configuration-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-save-configuration">↓</a></b> are for, but: <b>NB</b>: in the present state, attempt to load configurations saved by previous versions of the program may result in nonsensical values of one or more controls, and is better avoided.<p><br>
</p>

</div>
<h2 class="Section">
<a class="toc" name="toc-Section-3.2">3.2</a> ImageReader<a class="Label" name="sec:ImageReader"> </a>
</h2>
<div class="Unindented">
The program was designed as viewer for the custom streamfiles recorded by <b><span class="ProgramName">Gonzales</span></b>, with options for bookmarking interesting parts of it, scanning them for visual activity, and converting entire movies or excerpts from them to AVI coded files, with lossless or lossy compression.
</div>
<div class="Indented">
The program opens with a front panel window depicted below, where the various controls and indicators are broadly grouped according to their function. 
</div>
<div class="Indented">
<div class="center">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderOverview.png" alt="figure images/ImageReaderOverview.png" style="width: 90%; max-width: 1148px; height: auto; max-height: 830px;">

</div>

</div>
<div class="Indented">
The following paragraphs describe each group.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.1">3.2.1</a> Streamfile controls<a class="Label" name="sub:Streamfile-controls"> </a>
</h3>
<div class="Unindented">
<div class="wrap-l" style="max-width: 70%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderStreamfileControl.png" alt="figure images/ImageReaderStreamfileControl.png" style="max-width: 637px; max-height: 69px;">

</div>

</div>
 
</div>
<div class="Indented">
Operation starts when choosing which streamfile to open, by typing in <b>filename<a class="IndexReference" name="entry-filename-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-filename-(ImageReader)">↓</a></b>, or browsing with the folder button at its side. In principle the file can be temporarily closed, so to leave the option of access to another program, by pressing on the button <b>opened<a class="IndexReference" name="entry-opened-(Image-Reader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-opened-(Image-Reader)">↓</a></b> (which changes then into <b>closed, press to reopen<a class="IndexReference" name="entry-closed-press-to-reopen-(Image-Reader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-closed-press-to-reopen-(Image-Reader)">↓</a></b>) at its right, though this is not too recommended (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Gonzales-Streamfile-control">3.1.3↑</a>). The status of the opening is shown by the led on the right of the former button; it may turn to error for non-existing names, access denied (e.g. file already opened with exclusive access by another program), or disk problems.
</div>
<div class="Remark*">
The only kind of streamfiles which can be read is those written in the format documented in the API (see Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>). There is essentially no check preventing files of a different kind to be opened [<i>some could be implemented, e.g. requiring {xcount=1,ycount=1}</i>], and the responsibility of choosing the right ones is left to the user. The minimal check done is that, if a file of a wrong type is opened, and the information read from its header would imply an unreasonable image size, the file is marked as empty and not played back.
</div>
<div class="Unindented">
Other controls in this group are:
</div>
<div class="Description">
<span class="Description-entry">last&nbsp;file&nbsp;modification<a class="IndexReference" name="entry-last-file-modification-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-last-file-modification">↓</a></span> shows the timestamp of the last modification of the file, as reported by the OS, precise to the second. This time will be most of the time the time at which the file was closed, normally immediately after the time the last frame was recorded. It can therefore be useful to identify the chronological order of recordings, if other timestamping marking is absent. The time of last modification may be later than the time of recording only if the file is opened again for write by some program, which doesn’t happen in normal practice.
</div>
<div class="Description">
<span class="Description-entry">individual&nbsp;file/sequence&nbsp;files<a class="IndexReference" name="entry-individual-file/sequence-files-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-individual-file/sequence-files">↓</a></span> When the box is checked, the reader automatically sees as concatenated files which reside in the same directory and are part of a sequence (in the sense of section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Recording-controls">3.1.4↑</a>, i.e. with filenames differing only by a trailing number). When playing back forward or backward, one file is played after the other; when searching files for “activity” (see below), all the files are scanned in sequence.
</div>
<div class="Description">
<span class="Description-entry">ROI&nbsp;across&nbsp;files<a class="IndexReference" name="entry-ROI-across-files-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROI-across-files">↓</a></span> If on, the definition of the ROIs is remembered when closing the current file and opening a new one. If now, the ROIs are resetted.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.2">3.2.2</a> Main image and File info
</h3>
<div class="Unindented">
<div class="wrap-l" style="max-width: 70%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderMainImage1.png" alt="figure images/ImageReaderMainImage1.png" style="max-width: 1140px; max-height: 579px;">

</div>

</div>

</div>
<div class="Indented">
The main image shows the current image in the streamfile being played. It is implemented as standard Labview image widget, with features pretty the same as that of the main image in <b>Gonzales</b> (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Gonzales-Main-image">3.1.1↑</a>).The image can be zoomed in/out when the <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/lupe.png" alt="figure images/lupe.png" style="width: 11px; max-width: 22px; height: 9px; max-height: 18px;">
<i> lupe<a class="IndexReference" name="entry-lupe-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-lupe">↓</a></i> tool is selected, panned (<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/hand.png" alt="figure images/hand.png" style="width: 12px; max-width: 24px; height: 10px; max-height: 21px;">
<i> hand<a class="IndexReference" name="entry-hand-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-hand">↓</a></i>), ROIs can be drawn (<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/rectangle.png" alt="figure images/rectangle.png" style="width: 12px; max-width: 24px; height: 10px; max-height: 20px;">
<i> rectangle<a class="IndexReference" name="entry-rectangle-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-rectangle">↓</a></i>), and a right click menu adds a few options for handling ROIs, zooming to fit, exporting the image. Below the image tools, by the upper right corner of the image, a frame reports the current zoom factor, and the intensity value and coordinates of the pixel over which the mouse is hovering.
</div>
<div class="Indented">
Other relevant indicators display information about the file.
</div>
<div class="Description">
<span class="Description-entry">movie&nbsp;parameters<a class="IndexReference" name="entry-movie-parameters-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-movie-parameters">↓</a></span> reports all the data read from the header, as described in Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>. The most interesting parameters for the user are Xres and Yres, the total number of frames in the movie, the frame rate and the kind of frame/timestamp.
</div>
<div class="Description">
<span class="Description-entry">description<a class="IndexReference" name="entry-description-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-description-(ImageReader)">↓</a></span> is initially filled with the free text read from the header of the streamfile. This text can be edited, so that if excerpt of the file are saved still in streamfile format (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Playlist-tab">3.2.7↓</a>), their description can be modified.
</div>
<div class="Unindented">
The following two indicators are displayed only if the movie was recorded with either a relevant framestamp option (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-settings-frame">3.1.2↑</a>). They will display different numbers for each frame shown. As “relevant” evolved in the course of development of the programs, and sometime the fields were used to store some diagnostic information instead of the intended one, their content may be now irrelevant.
</div>
<div class="Description">
<span class="Description-entry">PanTilt<a class="IndexReference" name="entry-PanTilt-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-PanTilt">↓</a></span> is visible only is <b>software&nbsp;framestamp</b> was tagged. The field was originally supposed to contain the angular coordinates pointed by the pan-tilt unit (feature dropped after Gonzales2, IIRC). Sometime later it may have been used to record some kind of frame counter for debugging purposes.
</div>
<div class="Description">
<span class="Description-entry">AOI<a class="IndexReference" name="entry-AOI-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-AOI">↓</a></span> contains the coordinates of the image <b>A</b>rea <b>O</b>f <b>I</b>nterest, if a subframe was acquired. The indicator is visible only if either the movie was recorded with the Basler camera and <b>camera&nbsp;framestamp</b> was tagged (then the camera itself inserts the data), or <b>software&nbsp;framestamp</b> is tagged and either camera was used (Gonzales inserts the data).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.3">3.2.3</a> Movie position controls<a class="Label" name="sub:Movie-position-controls"> </a>
</h3>
<div class="Unindented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderMoviePosition.png" alt="figure images/ImageReaderMoviePosition.png" style="width: 70%; max-width: 783px; height: auto; max-height: 161px;">

</div>
<div class="Indented">
Below the main image there is a long slider bar, labeled with numbers from 0 to the last frame. The three sliders move depending on case, and can be grabbed and positioned.
</div>
<div class="Description">
<span class="Description-entry">the&nbsp;green&nbsp;slider<a class="IndexReference" name="entry-the-green-slider-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-the-green-slider">↓</a></span> points at the current frame of the movie, and moves progressively during playback. It can be dragged for immediate view of any frame within the movie. The number of the desired frame can also be entered in the numeric <b>frame#</b><a class="IndexReference" name="entry-frame-number-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-frame-number-(ImageReader)">↓</a> control immediately below the bar.
</div>
<div class="Description">
<span class="Description-entry">the&nbsp;yellow&nbsp;slider<a class="IndexReference" name="entry-the-yellow-slider-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-the-yellow-slider">↓</a></span> is used to bookmark the beginning of an interesting piece of the movie, and
</div>
<div class="Description">
<span class="Description-entry">the&nbsp;red&nbsp;slider<a class="IndexReference" name="entry-the-red-slider-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-the-red-slider">↓</a></span> to mark its end. Both sliders can be dragged, but their position can also be changed, and be relevant in other ways.
</div>
<div class="Description">
<span class="Description-entry">bookmark1<a class="IndexReference" name="entry-bookmark1-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-bookmark1">↓</a></span> pressed, sets the left bookmark at the current frame, i.e. brings the <b>yellow slider</b> where the <b>green</b> is. The left bookmark can also be set to a specific frame by entering the number in the green control below the button.
</div>
<div class="Description">
<span class="Description-entry">bookmark2<a class="IndexReference" name="entry-bookmark2-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-bookmark2">↓</a></span> pressed, sets the right bookmark at the current frame, i.e. brings the <b>red slider</b> where the <b>green</b> is. The right bookmark can also be set to a specific frame by entering the number in the red control below the button.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">b1&lt;</span><a class="IndexReference" name="entry-b1&lt;-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-b1<">↓</a></span> shows the frame at <span class="LVcontrol">bookmark1</span>, i.e. brings <span class="LVcontrol">the green slider</span> to the <span class="LVcontrol">yellow</span>, and continues playback from there.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">&gt;b2</span><a class="IndexReference" name="entry-&gt;b2-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index->b2">↓</a></span> shows the frame at <span class="LVcontrol">bookmark2</span>, i.e. brings <span class="LVcontrol">the green slider</span> to the <span class="LVcontrol">red</span>, and continues playback from there.
</div>
<div class="Unindented">
<div class="wrap-l" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderActivityMark.png" alt="figure images/ImageReaderActivityMark.png" style="max-width: 346px; max-height: 55px;">

</div>

</div>
 
</div>
<div class="Indented">
The next controls have to do with how the movie can be automatically be divided in bookmarked stretches. The workings of the method are described further below in the sections <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Single-blobbing">3.2.5↓</a>, <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-ROI-logic">3.2.6↓</a>, <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Playlist-tab">3.2.7↓</a>. The buttons are described here because of their use also in browsing the movie.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">take&nbsp;as&nbsp;reference</span><a class="IndexReference" name="entry-take-as-reference-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-take-as-reference-(ImageReader)">↓</a></span> stores the current images as reference, which is used as a “background” for either the blobbing tracking (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Single-blobbing">3.2.5↓</a>), or the ROI logic activity markup (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-ROI-logic">3.2.6↓</a>).
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">scan&nbsp;for&nbsp;activity</span><a class="IndexReference" name="entry-scan-for-activity-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-scan-for-activity">↓</a></span> When pressed, starts a scan of the from the beginning of the current movie, continuing then to the following movies of the same sequence, if there are and if <span class="LVcontrol">sequence&nbsp;files</span> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Streamfile-controls">3.2.1↑</a>) is checked. Most controls of the window are disabled during the scan, which can be canceled by pressing on a specific button which pops up while the scan is running.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">scan&nbsp;jump</span><a class="IndexReference" name="entry-scan-jump-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-scan-jump">↓</a></span> Since reading and processing every image of long movies can be very time consuming, while the large-scale activity scanned for can be slower, an option is provided for analyzing only one in every several images. Use 1 for maximal accuracy in locating image activity, larger numbers to save time with a coarser scan.
</div>
<div class="Unindented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderActivityBar.png" alt="figure images/ImageReaderActivityBar.png" style="width: 50%; max-width: 783px; height: auto; max-height: 61px;">

</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">The&nbsp;activity&nbsp;bar</span><a class="IndexReference" name="entry-The-activity-bar-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-The-activity-bar">↓</a></span> is the unnamed bar placed right below the main image frame and above the slider scale. Before any scan is done, it shows just a black uniform stripe. Once the movie is scanned, some parts of it may become white, as shown in the figure. Those parts denote stretches of the movie in which “activity” was detected. If “single blobbing” was used there will be only one line of activity marks; with “ROI logic” there will be as many lines as <b>Formulas</b> used; each line corresponds to one formula from bottom up.<br>
The activity bar stores only information for the current movie.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">previous&nbsp;bookmark&nbsp;activity&nbsp;stretch</span><a class="IndexReference" name="entry-previous-bookmark-activity-stretch-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-previous-bookmark-activity-stretch">↓</a></span> after the movie has been scanned and there is some activity content, this button moves the bookmarks (<span class="LVcontrol">yellow</span> and <span class="LVcontrol">red slider</span>) to the beginning and end of the previous stretch marked; moreover it sets the current frame (<span class="LVcontrol">green slider</span>) at the beginning of the stretch if the movie is playing forward, at its end if playing backwards (really? wow! Better to check it).
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">next&nbsp;bookmark&nbsp;activity&nbsp;stretch</span><a class="IndexReference" name="entry-next-bookmark-activity-stretch-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-next-bookmark-activity-stretch">↓</a></span> analogously to the previous button, moves the pointers to the following activity stretch.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">ROItracker</span><a class="IndexReference" name="entry-ROItracker-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROItracker">↓</a></span> is described here but belongs elsewhere. If on, the (single) ROI on the image will move around following the centroid of the tracked blob (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Single-blobbing">3.2.5↓</a>),.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.4">3.2.4</a> Jog shuttle
</h3>
<div class="Unindented">
<div class="wrap-l" style="max-width: 20%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderJogShuttle.png" alt="figure images/ImageReaderJogShuttle.png" style="max-width: 216px; max-height: 125px;">

</div>

</div>
This composite control controls the playback speed of the movie, which can be played forward as well as backwards. At 1x, the movie will be played at the frame rate specified by <span class="LVcontrol">frame rate</span><a class="IndexReference" name="entry-frame-rate-(Jog-shuttle)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-frame-rate-(Jog-shuttle)">↓</a> (provided that the streamfile can be read fast enough and the video card is capable of; normally files are inspected and played at a much lower speed than that they were recorded at, so that is a non-issue).
</div>
<div class="Indented">
At speeds larger than <span class="formula">±1</span>x, only one frame every some is shown.
</div>
<div class="Indented">
To ease navigation with the keyboard, the Jog shuttle commands are bound to <span class="code">PgDn</span> (decrease playback speed, i.e. also go faster backwards), <span class="code">PgUp</span> (increase playback speed), <span class="code">Esc</span> (freezes frame), <span class="code">F1</span> (backward one frame when in freeze motion), <span class="code">F2</span> (forward one frame).
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.5">3.2.5</a> the Single blobbing tab<a class="Label" name="sub:the-Single-blobbing"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderBlobbing.png" alt="figure images/ImageReaderBlobbing.png" style="max-width: 367px; max-height: 615px;">

</div>

</div>

</div>
<div class="Indented">
The principle of operation of “single blobbing” replicates that of “self-tracking” in Gonzales (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Self-Tracker">3.1.7↑</a>). The idea, and the potential use of the feature, was that when a small object moves within the larger image, a ROI centered on the object can follow and track it. The feature has been preserved across versions of the two programs. In ImageReader, each image of the movie can be analyzed by subtracting a reference image, and the coordinates of the resulting blob can be used a) to track a sort of trajectory of the object throughout the movie, b) to dynamically move the (<i>only one</i>) ROI in the frame, keeping its size and centering it on the object tracked. The dynamical ROI can be used to export a smaller movie (see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Playlist-tab">3.2.7↓</a>). The controls on this panel are the following:
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">thresholded&nbsp;difference</span><a class="IndexReference" name="entry-thresholded-difference-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-thresholded-difference-(ImageReader)">↓</a></span> is a binary image showing the result of the image processing done to locate the centroid of the blob, that is a morphological erosion of the thresholded absolute difference between the image analyzed and the reference background. The Blob<a class="IndexReference" name="entry-The-Blob-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-The-Blob">↓</a> (sorry, I really can’t resist; see <a class="URL" href="http://en.wikipedia.org/wiki/The_Blob">http://en.wikipedia.org/wiki/The_Blob</a>) is the set of points showing in white. Note that this image is updated infrequently during scanning, to save CPU time spent in screen rendering.<br>
The widget is locked in ROI draw mode (equivalent to choose the <img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/rectangle.png" alt="figure images/rectangle.png" style="width: 12px; max-width: 24px; height: 10px; max-height: 20px;">
 rectangle tool in the main image), so that rectangular ROIs can be dragged around interesting blobs. 
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">thresholding:&nbsp;lower,&nbsp;upper,&nbsp;erosions</span><a class="IndexReference" name="entry-thresholding:-lower-upper-erosions-(ImageReader)-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-thresholding:-lower-upper-erosions-(ImageReader)">↓</a></span> parallel the same controls in Gonzales, described in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Self-Tracker">3.1.7↑</a>.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">roi&gt;big</span><a class="IndexReference" name="entry-roi&gt;big-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-roi>big">↓</a></span> copies the position of the ROI on the thresholded&nbsp;difference image to the main image. For some reason I must have found this button very practical here.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">trajectory</span><a class="IndexReference" name="entry-trajectory-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-trajectory">↓</a></span> is an x-y graph of the position of the centroid of the detected object throughout the scanned images (one every <span class="LVcontrol">scan&nbsp;jump</span><b><a class="IndexReference" name="entry-scan-jump-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-scan-jump">↓</a></b>, see section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Movie-position-controls">3.2.3↑</a>) of the current movie. The trajectory is visible only if the movie has been scanned, and doesn’t retain positions of other movies in the same sequence, if there are. A red dot on the trajectory shows the centroid on the image closest to the current one.<p><br>
</p>

</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.6">3.2.6</a> the ROI logic tab<a class="Label" name="sub:the-ROI-logic"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderROIlogic.png" alt="figure images/ImageReaderROIlogic.png" style="max-width: 366px; max-height: 614px;">

</div>

</div>

</div>
<div class="Indented">
The Formula logic and use parallels that implemented in <span class="ProgramName">Gonzales</span>; it has been described extensively in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Formulas">3.1.9↑</a> and won’t be repeated here.
</div>
<div class="Indented">
When playing and navigating a movie, the result of the boolean logic is displayed in the <span class="LVcontrol">Formulas</span><a class="IndexReference" name="entry-Formulas-2" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-Formulas">↓</a> cluster for every current image. Moreover, the ROI logic can be exploited for scanning for activity, and hence the following controls are peculiar of <span class="ProgramName">ImageReader</span> and absent in <span class="ProgramName">Gonzales</span>:
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">formula&nbsp;to&nbsp;playlist</span><a class="IndexReference" name="entry-formula-to-playlist-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-formula-to-playlist">↓</a></span> selects which among the <span class="LVcontrol">Formulas</span> defined above is used during scanning in order to select stretches which are automatically inserted into the <span class="LVcontrol">playlist</span><a class="IndexReference" name="entry-playlist-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-playlist">↓</a> (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Playlist-tab">3.2.7↓</a>). For the current movie <i>only</i>, if the movie has been scanned for activity, selecting the one or the other formula will change the behavior of the <span class="LVcontrol">previous&nbsp;bookmark&nbsp;activity&nbsp;stretch</span><a class="IndexReference" name="entry-previous-bookmark-activity-stretch-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-previous-bookmark-activity-stretch">↓</a>, <span class="LVcontrol">next&nbsp;bookmark&nbsp;activity&nbsp;stretch</span><a class="IndexReference" name="entry-next-bookmark-activity-stretch-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-next-bookmark-activity-stretch">↓</a> controls (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Movie-position-controls">3.2.3↑</a>) based on the one or the other line of the previously filled <span class="LVcontrol">activity&nbsp;bar</span><a class="IndexReference" name="entry-The-activity-bar-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-The-activity-bar">↓</a>, that is according to the one or the other formulas, if they haven’t been changed in the meantime. When scanning a sequence of movies, unfortunately in the present implementation it is not possible to change the playlist content based on another formula without rescanning the sequence again.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">dt&nbsp;from&nbsp;start</span><a class="IndexReference" name="entry-dt-from-start-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-dt-from-start">↓</a></span> The stretch marked during an activity scan is contracted, retarding its beginning if <span class="formula"><i>dt</i> &gt; 0</span>, or extended, anticipating it if <span class="formula"><i>dt</i> &lt; 0</span>, with respect to the frame in which the formula changes value from <span class="ControlValue">false</span> to <span class="ControlValue">true</span>. The same <span class="formula"><i>dt</i></span> applies to all formulas.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">dt&nbsp;from&nbsp;end</span><a class="IndexReference" name="entry-dt-from-end-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-dt-from-end">↓</a></span> Analogously for the end of the stretch, with respect to the transition <span class="ControlValue">true</span><span class="formula"> → </span><span class="ControlValue">false</span>.
</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">show&nbsp;R&nbsp;values</span><a class="IndexReference" name="entry-show-R-values-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-show-R-values">↓</a></span> toggles the display of the numeric value (of the average absolute difference with the background) inside the ROIs in the main image. Suppressing may be useful to reduce clutter.
</div>
<div class="--Separator--">

</div>
<div class="Description">
<span class="Description-entry"><span class="LVcontrol">activity&nbsp;type</span><a class="IndexReference" name="entry-activity-type-0" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-activity-type">↓</a></span> determines whether scanning is done using the Single Blobbing method described in section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Single-blobbing">3.2.5↑</a>, or the <span class="LVcontrol">Formulas</span>.<p><br>
</p>

</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.2.7">3.2.7</a> the Playlist tab<a class="Label" name="sub:the-Playlist-tab"> </a>
</h3>
<div class="Unindented">
<div class="wrap-r" style="max-width: 40%;">
<div class="figure">
<img class="figure" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/ImageReaderPlaylist.png" alt="figure images/ImageReaderPlaylist.png" style="max-width: 367px; max-height: 615px;">

</div>

</div>

</div>
<div class="Indented">
The <span class="LVcontrol">playlist</span> is a list of stretches of movies (belonging to the same or to different files, even in different directories), which can be used for quick navigation, and as a batch list for format conversion.
</div>
<div class="Indented">
The entries in the playlist can be inserted in either of two ways:
</div>
<ul>
<li>
pressing <span class="LVcontrol">add stretch between bookmarks to playlist</span> appends the stretch currently selected (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Movie-position-controls">3.2.3↑</a>) to the list;
</li>
<li>
running a <span class="LVcontrol">scan&nbsp;for&nbsp;activity</span>, all the stretches identified are automatically appended to the existing playlist. If the scan spans several files of a sequence, all the relevant stretches are inserted as they are found.
</li>

</ul>
<div class="Unindented">
The entire playlist can be deleted with the <span class="LVcontrol">clear&nbsp;playlist</span> button; it can be saved to a file or reloaded with the <span class="LVcontrol">save&nbsp;playlist</span> and <span class="LVcontrol">load&nbsp;playlist</span> buttons respectively.
</div>
<div class="Indented">
An individual element of the playlist can be selected by clicking onto, and the selection is marked by a blue frame. The selection can be moved upward or downward of one element by clicking on <b><span class="LVcontrol"><b>^</b></span></b> or <span class="LVcontrol">v</span>. Pressing the green button <span class="LVcontrol">Go to selected stretch</span> the current entry becomes current, i.e. the relevant file is opened, the bookmarks and the movie position are adjusted accordingly. The selected entry can also be removed from the list with the button <span class="LVcontrol">delete selected</span>.
</div>
<div class="Indented">
The entire list of stretches present in the playlist can be exported to other files when the button <span class="LVcontrol">Export all bookmarked stretches</span><b>…</b> is pressed. Since for exporting each single frame of each stretch has to be read, converted and written, the operation can take a lot of time and can be canceled. Formats for exporting are the original streamfile format (in which case the export is useful to save only interesting parts of the movies, or regions of interest within the image), or AVI (often useful for presentation or as input for subsequent processing software). AVI is just a general format class; images can be coded or compressed with a variety of algorithms, leading to different degrees of size saving, image quality and processing time when saving rather than when reading back the movie. For quantitative image processing, it is strongly recommended to export movies using either a <i>lossless</i> image codec or no compression at all. The parameter <span class="LVcontrol">quality</span> affects the compression codecs which are <i>lossy</i>; its actual meaning depends on the particular codec. 
</div>
<div class="Indented">
Remember that if at least a ROI is defined in the image, the movie exported includes only the part of the image within the first ROI; if no ROI is defined, or if the ROI encloses the whole image, all the content is exported. if <span class="LVcontrol">ROItracker</span><b><a class="IndexReference" name="entry-ROItracker-1" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#index-ROItracker">↓</a></b> is on, the ROI position is adjusted per each frame according to the centroid of the blob resulting from the blobbing analysis, with the parameters currently in effect in the single blobbing tab (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:the-Single-blobbing">3.2.5↑</a>).
</div>
<div class="Indented">
At this moment, there is no provision in <span class="LVcontrol">ImageReader</span> for reading AVI files. The utility <span class="LVcontrol">AVItoStreamfile</span> described below (section <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:AVItoStreamfile">3.3.3↓</a>) can be used to convert back.<p><br>
</p>

</div>
<h2 class="Section">
<a class="toc" name="toc-Section-3.3">3.3</a> Goodies
</h2>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.3.1">3.3.1</a> WriteSpeedTestNormal<a class="Label" name="sub:WriteSpeedTest"> </a>
</h3>
<div class="Unindented">
A minimal labview tool to check the sustained write throughput of the RAID array. It writes where it finds free. The main point in using it is that it is written in Labview, hence in principle it should be subjected to the same eventual limitations in performance that Gonzales is subjected to.
</div>
<div class="Indented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/WriteSpeedTest.png" alt="figure images/WriteSpeedTest.png" style="width: 60%; max-width: 677px; height: auto; max-height: 667px;">

</div>
<div class="Indented">
The program simply tries to write repeatedly a chunk block of arbitrary data to <span class="LVcontrol">File&nbsp;to&nbsp;write</span>, relying on the OS for determining how this data has to be written on the surface of the disk. The amount of bytes written, per second and since the start of the run, are monitored. The average write throughput is affected by the write policy options with which the RAID disk array has been configured, by the position on the disk and contiguity of the data written, by the frequency of write operations to the disk and the size of the unit block written, and by low-level OS options about the write, such as <span class="LVcontrol">Unbuffered!</span> write or direct call of the OS file functions.
</div>
<div class="Indented">
The controls on this UI are supposed to be self-explanatory for the user needing to use this tool, and aren’t described in detail here. The desired values have to be set before the program is run.
</div>
<div class="Indented">
<span class="ProgramName">WriteSpeedTestNormal</span> can also be run in parallel with <span class="ProgramName">Gonzales</span> (only grabbing, not saving) or one of the Bitflow grabbing examples, like MultiBufferGrab.vi, in order to assess whether simultaneous grabbing affects the writing performance (it should to some extent, as both compete for memory and bus bandwidth).
</div>
<div class="Remark*">
Surprisingly, on system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system3">2.1.1↑</a> I have observed that the highest writing throughput is achieved when leaving <span class="LVcontrol">Unbuffered!</span> off. It may be that the modern OS has a particularly efficient buffering pipeline, which is optimized for working even better than requesting unbuffered transfers, at least for the fixed chunk sizes tried. Nevertheless, in <span class="ProgramName">Gonzales</span> the streamfiles are opened for write with unbuffered flag (<tt><span class="code"><tt>dwFlagsAndAttributes=0x20000080</tt></span></tt> to <tt><span class="code"><tt>kernel32.dll/CreateFileA</tt></span></tt>), and speed seems fine. <span class="ProgramName">WriteSpeedTestNormal</span> though is a little different because uses the native LV “Write to Binary File” block.
</div>
<div class="Unindented">
Alternatively, to test the disk performance, the more accepted <span class="ProgramName">iometer</span> (<a class="URL" href="http://www.iometer.org/">http://www.iometer.org/</a>) can be used.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.3.2">3.3.2</a> UDPSender2 and UDPReceiver2
</h3>
<div class="Unindented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/UDPSender.png" alt="figure images/UDPSender.png" style="width: 50%; max-width: 497px; height: auto; max-height: 339px;">
<span class="hfill"> </span><img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/UDPReceiver.png" alt="figure images/UDPReceiver.png" style="width: 45%; max-width: 484px; height: auto; max-height: 444px;">

</div>
<div class="Indented">
Two basic VIs for testing UDP communication with <span class="ProgramName">Gonzales</span> and <b><span class="ProgramName">BEst</span></b>. The first one sends arbitrary strings to a specified UDP port; strings are sent out when they are terminated by a newline. The second one listens on the specified UDP port for incoming data. There is also an<b> <span class="ProgramName">UDPReceiver2</span></b>, which was developed to test the feature of setting arbitrary controls via UDP commands <tt><span class="code"><tt>set “control” value</tt></span></tt>.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.3.3">3.3.3</a> AVItoStreamfile<a class="Label" name="sub:AVItoStreamfile"> </a>
</h3>
<div class="Unindented">
<img class="embedded" src="./The Video Streaming SystemBeing the first attempt to document the programs Gonzales and ImageReader for fast video streaming, including tips for use and installation reports_files/AVItoStreamfile.png" alt="figure images/AVItoStreamfile.png" style="width: 60%; max-width: 789px; height: auto; max-height: 540px;">

</div>
<div class="Indented">
Since <b>ImageReader</b> was not designed to read but files in the custom format described in Appendix <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#chap:Streamfile-API">A↓</a>, while for testing purposes it may be useful to inspect other movies, a tiny tool for format conversion of one movie at a time has been provided. Of course conversion takes additional time and requires disk space which would both be saved if <b>ImageReader</b> could read AVI files directly. From the development point of view, though, it was way easier to produce a tiny helper tool, which is anticipated to be used infrequently, rather than to augment <b>ImageReader</b> with the read AVI capability.
</div>
<div class="Indented">
The controls here should really be self-explanatory, and anyway short instructions are provided onscreen in the yellow frame.
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-3.3.4">3.3.4</a> matlab scripts
</h3>
<div class="Description">
<span class="Description-entry"><tt><span class="code"><tt>movietimestamp2.m</tt></span></tt></span> <tt></tt>gives an example of reading the whole array of framestamps (if present) and timestamps of a movie, and of accessing an individual image. Having the whole frame and timestamps at once in arrays allows easy computations and checks of recording timing jitter.
</div>
<h1 class="Chapter">
<a class="toc" name="toc-Appendix-A">A</a> Streamfile API<a class="Label" name="chap:Streamfile-API"> </a>
</h1>
<h2 class="Section-">
<a class="toc" name="toc-Section--1"></a>Streamfiles format since Gonzales3
</h2>
<div class="Unindented">
Blocks in the file are padded to the next multiple of the sector size, for streaming efficiency. The sector size of the RAID array of the development system was 512 bytes, as well as of many other hard disks. In fact, I don’t think I considered the problem of porting streamfiles across hard disks with different sector sizes - that is, the programs may misalign the contents if the sector size happens to differ, or the reader may not be able to read streamfiles copied onto a disk with different size partitioning. Anyway.
</div>
<div class="Indented">
Content is as follow:
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--1"></a>Header (first block, size=1 sector):
</h3>
<div class="Description">
<span class="Description-entry">xres</span> (<tt>U32</tt>)
</div>
<div class="Description">
<span class="Description-entry">yres</span> (<tt>U32</tt>)
</div>
<div class="Description">
<span class="Description-entry">ImageType</span> (<tt>U32</tt>)
</div>
<div class="Description">
<span class="Description-entry">BorderSize</span> (<tt>U32</tt>) (in Labview, images have Borders; extra allocation helps image processing). For us, always 0.
</div>
<div class="Description">
<span class="Description-entry">Linewidth</span> (pixels) (<tt>U32</tt>) (<span class="code">&gt;= <tt>xres</tt></span>, IIUC <span class="code">=<tt>xres+2*bordersize</tt></span>)
</div>
<div class="Description">
<span class="Description-entry">Bytes</span> per pixel (<tt>U32</tt>). 1 in all our takes.
</div>
<div class="Description">
<span class="Description-entry">Xcount</span> (<tt>U32</tt>) number of images mosaiced in one write, for us always 1.
</div>
<div class="Description">
<span class="Description-entry">Ycount</span> (<tt>U32</tt>) idem
</div>
<div class="Description">
<span class="Description-entry">TotalFrameCount</span> (<tt>U32</tt>)
</div>
<div class="Description">
<span class="Description-entry">FrameRate</span> (<tt>U32</tt>) (approximated to integer)
</div>
<div class="Description">
<span class="Description-entry">EmbeddedTimestampMode</span> (<tt>U32</tt>): 
</div>
<ul>
<li>
bit 0 <span class="formula"> → </span> Basler Stamp (inserted by the camera at source): AOI (<tt>4*U16</tt>) and image counter (<tt>U16</tt>) in the last 10 pixels of the last image line. 
</li>
<li>
bit 1 <span class="formula"> → </span> Software timestamp (inserted by Gonzales): the first 20 pixels of the last line contain: image counter (<tt>U32</tt>), AOI (<tt>4*U16</tt>), Pan Tilt (<tt>2*I32</tt>). Versions of Gonzales later than 3 may have written other test and statistic data (e.g. grabbed buffed number) in place of the no more present PTU coordinates; do not relate to them. 
</li>
<li>
bit 2 <span class="formula"> → </span> Optronis timestamp (inserted by the camera at source): the first 2 pixels of the first line should contain image counter (U16) [the buggy firmware of the older Optronis writes garbage here, the other cameras are ok]
</li>
<li>
bit 3 <span class="formula"> → </span> Software millisecond absolute timestamp (inserted by Gonzales, subjected to OS jitter): (<tt>U64</tt>) counter representing the number of milliseconds from 1/1/1904, written in place of first 8 pixels of the first line, i.e. the upper left corner. (Was not implemented, hence bit3==0, until Gonzales8).<div class="Remark*">
Bits 0 and 2 are mutually exclusive, but the other bits may be either on or off depending on user choice at the time of recording.
</div>

</li>

</ul>
<div class="Description">
<span class="Description-entry">Description</span> (<tt>char*458</tt>, <tt>\0</tt> terminated): free text
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--2"></a>Each image contains:
</h3>
<div class="Unindented">
<tt><span class="code"><tt>yres*linewidth*bytesperpixel</tt></span></tt> bytes, stored consecutively (no idea if line-major or column major)
</div>
<div class="Indented">
Images always start at the beginning of a sector. Hence, image N begins in the file at byte <tt><span class="code"><tt>sector_size*(1+N*ceil(yres*linewidth*bytesperpixel/sector_size)</tt></span></tt>).
</div>
<div class="Indented">
In images with an embedded timestamp, some pixel values of the first or last line are replaced by the numeric values of the data specified above.
</div>
<h1 class="Chapter">
<a class="toc" name="toc-Appendix-B">B</a> Changelogs<a class="Label" name="chap:Changelogs"> </a>
</h1>
<div class="Unindented">
For historical memory.
</div>
<h2 class="Section-">
<a class="toc" name="toc-Section--2"></a>Gatto10
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--3"></a><u>26/10/2014</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--1"></a>ImageReader 9.3
</h4>
<ul>
<li>
hotfix: img_read_file_Normal receives also the argument LineWidth, because apparently the alignment requirement has changed from multiple of 32 bytes to multiples of 64 bytes somewhen across time. Old streamfiles, especially ROI cuts with odd horizontal sizes, recorded in the past, have values of LineWidth recorded in the header which don’t match anymore what IMAQ GetImagePixelPtr reports for an image buffer of the same exact size, hence the stored value of LineWidth has to be taken into account instead.
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--4"></a><u>12/3/2014</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--2"></a>Gonzales 10.3 
</h4>
<div class="Unindented">
(from 10.2, wasn’t able to backconvert 10.2.1):
</div>
<ul>
<li>
in Self Track. the center of the ROI can be moved not just to the center of the detected blob, but also at any of the eight corner and mid-side positions of the bounding rectangle. This is done to help automatic positioning of optical threshold detectors with moving poles.
</li>
<li>
"lower threshold", "upper threshold" and "erosions" unbundled in order to be directly controllable by UDP set commands.
</li>
<li>
In principle, numeric arrays too can set via UDP commands. That was done for changing "ROI size", but the periodic check to rebound the ROI inside the frame renders that ineffective as of now.
</li>
<li>
minor glitches addressed, strings of "formula to Write to file" updated on start, and "load configuration", "save configuration" forced to false
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--5"></a><u>2/1/2014</u>
</h3>
<div class="Unindented">
System #4 for Noy.
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--3"></a>Gonzales 10.2.1:
</h4>
<ul>
<li>
Just recompile for LV2013_64bit, moved to .2 to safeguard from possible changes. In fact, enlargement of the ringbuffer to 600 images (more than that seems to impact negatively performance and to cause stability problems); possibly other minor FP size adjustments.
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--4"></a>ImageReader 9.2:
</h4>
<ul>
<li>
timestamp as string appended into the AVI frame data when stream is exported to AVI. No check on source is done, i.e. when exporting to AVI streamfiles which have not been recorded with "software timestamp" tagged, garbage will be present in that position
</li>

</ul>
<div class="Unindented">
(I’ve found on backup disk a 9.1 dated 16/1/2013; that was probably just a test, but to be on the safe side and avoid confusion I advanced to 9.2)
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--5"></a>AVIfileLister:
</h4>
<ul>
<li>
quick snippet to read the timestamps of the first and last frame of all AVI files in a selected directory (supposed exported by ImageReader9.2 from a streamfile recorded with "software timestamp" tagged), and to dump the information into a csv file. 
</li>

</ul>
<h2 class="Section-">
<a class="toc" name="toc-Section--3"></a>Gatto9
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--6"></a><u>15/8/2013</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--6"></a>Gonzales 10.2: 
</h4>
<ul>
<li>
solve bug "UDP in error" not clearing unless restarting the big loop 
</li>
<li>
solve bug frame in movie repoted as #0 when udp reporting activity of hotspot&gt;1. Hopefully not broken the frame# reporting upon trigger, because the fix was about a mixup there. 
</li>

</ul>
<div class="Labeling">
FIXME: when the file mode is not progressive, i.e. when writing to file is stopped and resumed again, the report about writing and triggers refers to a frame number which is resetted to 0 at each resume, and hence wrong. 
</div>
<div class="Labeling">
TODO: The frame number is reported if "writing" is on. That is, it is reported as 0, trivially, when writing starts (save the bug above) and not reported when it stops. Improve the logic so that the frame number is reported either when "writing" is on, or when changed from on to off, or when changed to on and file mode is not progressive. 
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--7"></a><u>19/3/2013</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--7"></a>Gonzales 10.1: 
</h4>
<ul>
<li>
add a "Not Write repeat line (OUT)" for Tess 
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--8"></a><u>21/1/2013</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--8"></a>ImageReader9.1:
</h4>
<ul>
<li>
subvis for Load/Save ROI logic. No visible FP change if excluding perhaps very minor cosmetics.
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--9"></a>Gonzales10:
</h4>
<ul>
<li>
ROI logic instead of Hotspots; triggers &amp; hotspots tab reorganized.
</li>
<li>
automatism to choose the Karbon SDK path and Karbon card registry entry on the system, hopefully allowing same code to work on all systems.
</li>
<li>
UDP listener to generate arbitrary control changes events (first use thought: new background, also commanded write start)
</li>
<li>
Chosen ROI formula triggers Write start OR Write in effect (selectable)
</li>
<li>
reconfiguration of DI/O and UDP ports does not restart grabbing, as did before due to lazy programming.
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--9"></a><u>15/1/2013</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--10"></a>ImageReader9:
</h4>
<div class="Unindented">
Glitches corrected:
</div>
<ul>
<li>
no ROI on opening the program; 
</li>
<li>
default "remember ROI across files" 
</li>
<li>
ROI diff average values updated also when pressing "take as ref"
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--10"></a><u>1/1/2013</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--11"></a>ImageReader9rc:
</h4>
<ul>
<li>
ROI logic for scanning activity: new tab with boolean formulas, choice between old mode "blobbing" activity and new logic mode; definition of stretched with start and end anticipated/retarded with respect to the activity detected on image; annotation of the main image with ROI name and mean absolute difference value; saving and loading of ROI definitions and formulas.
</li>
<li>
some code modularization in the scanXact event frame, to allow development.
</li>
<li>
image updates while scanning for activity.
</li>
<li>
minor cosmetic FP and wiring cleanup.
</li>
<li>
TODO: double buffering and simultaneous read/process could speed up scanning and export?
</li>

</ul>
<h2 class="Section-">
<a class="toc" name="toc-Section--4"></a>Gatto8+
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--11"></a><u>25/12/2012</u> 
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--12"></a>Gonzales 9.3
</h4>
<div class="Unindented">
Testing on the new system under 64bit OS, LV2012, SDK5.60. 
</div>
<ul>
<li>
path and registry key for the new environment (to be hardwired on the BD according to case) 
</li>
<li>
avoided unnecessary registry writes if camera configuration is not changed. 
</li>
<li>
avoided restarting grabbing when pixel clock or #taps is changed. Avoids a frequent loss of sync of the frame after the very first few images grabbed, while settings are changed. 
</li>
<li>
added a boolean indicator "setting camera". Main use, to flag the completion of the serial settings, to reference the first fiducial framestamp. The count of "lost frames" (when camera framestamp is checked) is now correct. 
</li>
<li>
All stream file access functions use now normal (unbuffered) file access functions, avoiding the original direct calls to kernel32.dll. Same functionality, hopefully more portability. 
</li>
<li>
changed ROI save in configuration file, still not satisfactory (restores as ROI the global rectangle, not all ROIs). 
</li>
<li>
write configuration on exit copes nicely with configuration file not previously existing. 
</li>
<li>
minor cosmetic changes (wire positions) on the BD. Many blocks wrapped by conditional disables for testing, left in place. 
</li>
<li>
observed occasional MemoryManager.cpp crashes. To be cleared whether LV bug or race condition. 
</li>
<li>
Observed higher tendency of locking the frame out of sync, notably immediately after changing to a new frame mode. An operative workaround, if the image locks out of sync, is to select again the same "Karbon camera configuration" from pull down menu, and repeat if necessary. If it doesn’t help, usually lowering the fps, selecting the configuration, and increasing fps afterwards does the trick. 
</li>

</ul>
<div class="Unindented">
TODO: make nicer icons. 
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--13"></a>SDK5.60 
</h4>
<div class="Unindented">
Aware of pointer typing bug in "Buffer Setup Primitive.vi". See <a class="URL" href="http://www.bitflow.us/Forum/viewtopic.php?p=1299">http://www.bitflow.us/Forum/viewtopic.php?p=1299</a> 
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--12"></a><u>23/12/2012</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--14"></a>Gonzales 9.2
</h4>
<div class="Unindented">
transitional backup version 
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--13"></a><u>27/9/2012</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--15"></a>Gonzales 9.1
</h4>
<ul>
<li>
Message reporting logic changed attempting to achieve more reliable frame# report. Local interthread variables store the grabbed frame number at the time the last trigger/hotspot was received, and the reporting thread which builds the message reads these variables, even if running asynchronously. 
</li>
<li>
autosaved configuration file now called &lt;VI_name&gt;Config.dat instead of GrabberConfig.dat to avoid mixup of files when running variation VIs from the same directory. 
</li>
<li>
ROI position saved across sessions. 
</li>
<li>
attempting to get a correct count of "lost frames", but still not finding the logic mistake. 
</li>

</ul>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--14"></a><u>11/7/2012</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--16"></a>Gonzales9 
</h4>
<div class="Paragraph-">
<a class="toc" name="toc-Paragraph--1"></a>New features: 
</div>
<ul>
<li>
best attempt to achieve a millisecond precision software timestamp. The timestamp is obtained by combining the system clock and the BIOS ticker. Both have millisecond resolution, but the former is updated at a rate decided by the OS (every ~15ms on windows XP, every ~1ms on linux and windows7). The timer readouts achieved seem accurate to +-1ms as long as the screen activity is minimal. Plotting a new image in the main Gonzales window adds delays of ~5-10ms, and displaying Gonzales statistics even of ~50ms. 
</li>
<li>
a new option for soft stamping the streamed images with this timestamp is implemented. The timestamp consists of 8 bytes written in place of the upper left corner, representing the number of milliseconds from 1/1/1904. Images can be marked with this timestamp as well as with the camera hard framestamp and soft framestamp previously implemented, so that their mutual consistency can be further checked. The considerations about the jitter and reliability of this software timestamp apply. 
</li>
<li>
one further digital input line is polled, so to provide the option of marking an additional trigger event (additional to the trigger used to start the recording). 
</li>
<li>
UDP reporting of various events, including start/stop of writing, file closing/reopening, hotspot activity, external hardware triggering. The report datagram includes the presumed timestamp, the kind of event, the current filename and the estimated frame number simultaneous with the event. The pretrigger offset is for the moment NOT taken into account in the computation of the frame, while the queue backlog is. The above considerations about the accuracy and jitter of the software timestamp apply. The UDP reporting can be directed to any single host (named or IP address) and port. It could be easily changed to broadcasting. The current design allows for a maximum of 100 report datagrams per second, but that is not a hard limit. 
</li>
<li>
the logic of polling the digital input lines and repeating on digital outputs has been somewhat changed, and it would be better to recheck that they function correctly. 
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--17"></a>ImageReader8
</h4>
<div class="Paragraph-">
<a class="toc" name="toc-Paragraph--2"></a>New features: 
</div>
<ul>
<li>
support for the new software timestamping mode. 
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--18"></a>Miscellaneous:
</h4>
<div class="Unindented">
A matlab function, movietimestamp2(), is provided for extracting hard (Optronis only) and soft framestamps, as well as soft framestamps from a streamed movie. It is also a good example of reading the streamfiles according to the previously communicated API. 
</div>
<div class="Indented">
Usage example: to check that no frame is lost, and the accuracy of the software timestamping: 
</div>
<pre class="LyX-Code">[t_movie,s_framestamp,c_framestamp,img1]=movietimestamp2(’F:\testGonzales9\r’);
subplot(311),plot(diff(t_movie));
subplot(312),plot(diff(s_framestamp));
subplot(313),plot(diff(c_framestamp)); 
</pre>
<div class="Unindented">
A minimal UDP listener implemented in Labview is also provided, for debugging. The listener is directed to the configured port of localhost. 
</div>
<h2 class="Section-">
<a class="toc" name="toc-Section--5"></a>Gatto6&amp;7
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--15"></a><u>21/9/2011</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--19"></a>New features in ImageReader5:
</h4>
<ul>
<li>
improved navigation of sequenced files. A sequence is here defined as a set of streaming files, residing in the same directory, and having filenames differing only by a _NNNN ending, where NNNN is any integer number (no limitation about number of figures, nor is needed for numbers to be consecutive, as intermediate files may have been removed). An eventual file sharing the same name, but without the _NNNN ending is considered the first one of the sequence.
</li>
<li>
A new checkbox by the jog-shuttle control determines whether the reader works in single file mode or sequence mode.<div class="Unindented">
In sequence mode: 
</div>
<ul>
<li>
play forward/backward automatically moves to the next/previous file of the sequence;
</li>
<li>
in paused mode, single stepping is also through files of the sequence.
</li>
<li>
Search for activity continues from the current file on, to the last file of the sequence, using the same reference image initially chosen. Activity (i.e., frames sufficiently different than the reference) stretches are automatically inserted in the playlist. 
</li>

</ul>

</li>
<li>
Playlist. <div class="Unindented">
A new list of stream stretches can be used. Each entry of this list contains the filename reference to the movie, a start and an end point. Filenames can belong to different sequences and reside in different directories. Filenames cannot be edited, but start and end frame number can. An unlimited number of stretches, even overlapping, of the same movie can be inserted in the playlist. The playlist is not for "playing" the stretches in sequence, but is intended to be a repository of bookmarks into different files at once, and a list of stretches to be exported in batch, unsupervised operation. Entries in the playlist can be inserted or removed manually, copying the current filename and bookmark position, or automatically, as the result of a scan for activity search. The playlist can be saved to file and retrieved; it can be navigated. No provision is made for reordering it, though. The reader can be made to play the currently selected entry of the playlist at a click. <i>[No, I don’t know how to make more evident the highlight of the selected entry]</i>. An export action exports FIRST the stretch of the current movie between bookmarks (previous behavior), THEN continues exporting one after the other the entries of the playlist FOLLOWING the currently selected one. This is not the most ergonomic behaviour, and could be improved in future. The usage scenario for the time being would be to select in the playlist the first stretch to be exported (could be at any point of the playlist), render it current, and then start the exporting. Exporting and scanning for activity can be canceled at any time even when they navigate through multiple files <i>[but there seems to be a bug as sometimes the cancel button does not react — to be investigated]</i> 
</div>

</li>
<li>
Search for activity: if(?) no ROI is selected in the main image (right mouse button/clear ROI), then the ROI resulting after the search will be the largest rectangle containing all the "active" pixels across all images scanned and tested. This feature allows to preselect automatically an "interesting" subregion of the image. The resulting ROI will just contain the active pixels; an eventual guard border has to be added manually a posteriori by enlarging the ROI found. 
</li>
<li>
improved robustness of the program when reading corrupted files (but no attempt made yet to guess the correct movie parameters of stream files with missing or corrupted header block). <i>[Corrupted headers also usually result in an abnormally large number of frames; I still have to prevent the program from trying to loop on the nonexistent frames when playing in sequence, or scanning for activity, otherwise the program does it forever]</i>.
</li>
<li>
Timestamping:<div class="Unindented">
As of now, the following sources of framestamping and timestamping are available:
</div>
<ul>
<li>
the OS marks the creation date, the closing date and the last access date of the file to the precision of 1 sec. Currently ImageReader5 reports the second of these three, which is the one most easily achievable with LV. These already provide an identifier.
</li>
<li>
at recording time, the user can presently choose to activate camera timestamping and soft timestamping. The former, <i>for the camera with the correct firmware release</i>, is a 16 bit counter, which advances at every frame, i.e. regardless of whether we are writing to file or not. The information is stored in corner pixels of the image. The soft framestamp also writes to corner pixels the values of two I32 program counters, which are also running since the program is started. Non identity of these two values already implies some loss. All these counters can be used to some extent to determine the timing of each frame and to detect frame losses. For instance, the values of each of these counters have to increment by 1 at each frame; larger increments mean either a frame loss or an interrupted and resumed recording [which is one of the currently possible modes of operation!]. Jumps forward of these counter of as many frames as the ringbuffer size (currently 400), or multiples of, denote a buffer full condition, i.e. a sustained slowing down of the write-to-disk thread w.r.o. the grabbing thread. The framestamp provided by the camera is absolutely (in the sense, not affected by software jitter) reliable, but wraps around 2^16, that is every 65sec at 1000fps. Hence it provides only timing information modulo that amount. Relative timing of a frame within a movie is currently calculated by multiplying the counter increment since the first frame of the movie by the movie fps. The only "absolute" timing achievable as of now, considers the absolute value of these counters, which is at best relative to the time either the camera was turned on or the grabbing program was started, i.e. not too useful.
</li>

</ul>
<div class="Unindented">
An implementation of absolute (PC clock) soft timestamping of the grabbing time of each frame is under consideration. 
</div>

</li>

</ul>
<div class="Paragraph-">
<a class="toc" name="toc-Paragraph--3"></a>Known glitches:
</div>
<div class="Unindented">
It seems that Scan For Activity, when launched in sequence mode, can be canceled anytime during the scan of the first movie, but only at the end of the subsequent ones (problem of front panel reactivity probably due to the chaining of event cases enforce to achieve the sequenced scan).
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--20"></a>New features in Gonzales7:
</h4>
<ul>
<li>
stricter timing in the startup of the recording, notably with respect to triggered start and pretrigger recording. With the work carried on so far (essentially more careful decoupling of GUI activity from time critical threads), I have been able to achieve a somewhat more reliable timing on Inbar’s system, but not yet the goal of time determinism to the millisecond. I’m already much in the direction though, as the current performance seems to be the start of the recording exact to the millisecond in at least 90% of the cases, BUT with a systematic (and changing) further small anticipation. Extensive timing tests, now made easy with ImageReader5, have been done by recording several short movies with various fps and pretrigger time settings, filming a led which is turned on or off immediately after the record button is pressed or the trigger signal is received. The two problems observed as of now <i>[could hopefully change]</i> are: <ol>
<li>
The recording starts actually always a number of frames earlier than expected (w.r.o. the turning on of the led). That is at least good because it implies no data loss. Usually the number of early frames is ~8. A couple of them could be explained by the fact that shooting is already taking place before the frame is readout from the camera and then transferred to computer memory; it may well be that the led turns on with a delay (due to data transfer to DI/O delay or led response time), but those don’t explain completely what observed at different fps. It is to be assessed whether this overhead is due to the polling or to the repeat of the trigger state done via an USB card, which certainly involves the management of internal communication buffers and packetization. 
</li>
<li>
on a minority of movies, a few images which should still belong to the previous movie in the sequence end up in its successor. That is evidenced by inspecting framestamps. Usually the first offending frames are ~12 frames after the last frames of the preceding movie, then there is a longer frame counter break, and then begins the intended movie. Relative timing computations based on the difference between the current frame of the movie and its first one are clearly affected. <i>[bug to be tackled]</i>
</li>

</ol>
<div class="Unindented">
On Udi’s system, these problems are absolutely exacerbated at normal working fps, and repeatable trigger timing seems possible only when shooting at rates of the order of tens of fps.
</div>

</li>
<li>
better care taken of the sequencing of opening and closing files in progressive recording mode. That should avoid situations in which image data intended for one file is written on the next one of the sequence, opened too early, and file headers not correctly created. <i>[NB: the system has anyway some limitation, yet do be fully timed, as for opening and closing files, which require longer disk operations (moving writing heads, despite caches, etc.). As a rule of thumb, I would say that you shouldn’t be working in progressive file mode if you expect recordings to be spaced in time by say, less than 100ms of dead time]</i>
</li>
<li>
in Progressive Recording mode, the maximal number of frames to record is remembered from one stream file to the next. It is only bounded by the available disk space, and reduced when less than the requested number is available. <i>[The actual number of frames recorded is not as of now very exact, due to the construction of the program. That deserves to be improved in future, together with a better treatment of the number of frames to be included in the stream AFTER the end of the trigger signal, and the option of posttrigger delay in starting to record]</i>
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--21"></a>In course of evaluation, probably will be implemented in the near future: 
</h4>
<ul>
<li>
Absolute soft timestamping of the frame in corner pixels, as double precision second counter since 1/1/1904. Would either replace and supersede the previous PTU position stamp, currently used as grab loop/write loop counter stamp (2xI32), or augment it, perhaps classifying it as a new stamping option (file header, etc). That would represent the time of arrival of the frame from framegrabber to memory; not the absolute shooting time, but valuable for referencing and studying the grabbing jitter.
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--22"></a>Miscellaneous comments about the systems: 
</h4>
<ul>
<li>
The present design pattern of the recording system is the only possible one which allows pretriggered recording of the images with the given hardware, <b><i>for unpredictable trigger occurrence</i></b>. That is, given that neither the camera or the framegrabber have image memory, we run the camera continuously, store a heap of recent images within the computer memory, and <b><i>if</i></b> a trigger appears we decide which images to transfer to disk.<br>
Our program, written in user space on a GUI-reactive system, has to stand behind the two time-critical tasks - download images from the framegrabber before it is too late, and poll a trigger input - and take software decisions.<br>
If we would always be in the conditions where the trigger occurrence could be anticipated (e.g., if the control of the trigger event would be our call, not if the trigger depends on the occurrence of some external and unpredictable event), then we could switch to a model in which the camera is "turned on" and starts to deliver frames only with the selected anticipation before the trigger. That design would allow the trigger to be taken care by non-user-interaction dependent hardware, which could enforce real strict timing. For instance, a pulse generator (card, eventually) providing the camera frame sync, which would start its train of pulses at the activation of a pretrigger input, which would precede the trigger output by a preprogrammed time. Our program design would have however to be significantly revised.<br>
The path I have been pursuing so far, instead, has been of trying to identify all existing impediments to the time critical tasks, and to decouple them, in order to maintain the existing GUI driven, user space design pattern, which is more comfortable for me to work with.
</li>
<li>
It is recommendable to upgrade Udi’s system with some sort of graphic card. It seems that screen drawing operations take always a high system priority, which heavily interferes with other time critical tasks. On Udi’s system these are noticeably slower and heavier to the system than on Inbar’s system.<br>
Though programmatically it is possible (and has been largely done so far) to limit heavily the amount of redraw operations, it is not desirable to have none of them. It seems (but see next point) that the producer-consumer thread model for grabbing and writing to disk is still able to cope with the maximal target bandwidth without loss of frames, but high jitter is then apparent, as evidenced for instance by fluctuations of the loop repetition rate and ringbuffer fill. This jitter is almost absent in Inbar’s system. Moreover Inbar’s system is even as of now way more repeatable w.r.o. trigger timing repeatability when the trigger is polled from the USB DAQ card. That this is due to a competition of priorities is merely an educated guess so far. 
</li>
<li>
The camera used in Udi’s setup has an older version of its firmware, which is incapable of writing correct framestamps. Upgrade is recommended in order to be able to monitor the performance and the eventual loss of frames of the recording system, which presently is only indirectly possible and not always conclusive. 
</li>
<li>
Udi’s system seems slightly unstable, but precise causes and cures unassessed. Unknown whether eventual BIOS or framegrabber firmware upgrades might help. Recurring complaints are inability to cold boot if an USB peripheric is connected, and rare nonrecognition of the framegrabber card at cold boot, usually solved by turning off the system for a while, in extreme cases by removing and reinserting the framegrabber card. 
</li>
<li>
To be assessed if the use of a PCI DI/O card (rather than the present USB DAQ) could provide stricter overall reaction times to the recording trigger, which is currently software polled.
</li>

</ul>
<h2 class="Section-">
<a class="toc" name="toc-Section--6"></a>Gatto 5
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--16"></a><u>21/1/2011</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--23"></a>Gonzales5 &amp; 6
</h4>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--24"></a>ImageReader4
</h4>
<h2 class="Section-">
<a class="toc" name="toc-Section--7"></a>Gatto4
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--17"></a><u>21/9/2010</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--25"></a>Gonzales4
</h4>
<ul>
<li>
writing to windows registry for configurations
</li>
<li>
removed range camera, camera-PTU registration and PTU drive
</li>

</ul>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--26"></a>ImageReader4
</h4>
<h2 class="Section-">
<a class="toc" name="toc-Section--8"></a>Gatto 3
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--18"></a><u>6/1/2010</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--27"></a>ImageReader4 18/1/2010
</h4>
<h2 class="Section-">
<a class="toc" name="toc-Section--9"></a>Gatto 2
</h2>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--19"></a><u>23/11/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--28"></a>Gonzales3
</h4>
<div class="Unindented">
Still had the option of integrated tracking with a range camera, and PID control of a pan-tilt head for the fast camera. The option was later abandoned because of poor performance and stability of the setup.
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--20"></a><u>19/11/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--29"></a>Gonzales2
</h4>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--21"></a><u>17/11/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--30"></a>Gonzales
</h4>
<div class="Unindented">
Incorporated TopoTracker, not yet self-tracking. Optronis already in use, but only fps change implemented.
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--31"></a>TopoTracker
</h4>
<div class="Unindented">
An original IMAQdx camera+PTU application then merged into Gonzales
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--32"></a>FastCameraStream11-13
</h4>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--22"></a><u>23/11/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--33"></a>ImageReader3 
</h4>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--34"></a>ImageReader2
</h4>
<h2 class="Section-">
<a class="toc" name="toc-Section--10"></a>Gatto
</h2>
<div class="Unindented">
Most of the contents of the directory have to do with frustrating attempts to benchmark disk streaming.
</div>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--35"></a>FastCameraStream
</h4>
<div class="Unindented">
The very first attempts of Gonzales were called FastCameraStream, FastCameraStream2-11, for the record.
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--23"></a><u>12/10/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--36"></a>ImageReader2
</h4>
<div class="Unindented">
The latter had already in nuce the ideas and look of the current one.
</div>
<h3 class="Subsection-">
<a class="toc" name="toc-Subsection--24"></a><u>11/10/2009</u>
</h3>
<h4 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection--37"></a>ImageReader
</h4>
<h1 class="Chapter">
<a class="toc" name="toc-Appendix-C">C</a> Problems encountered in the past
</h1>
<ul>
<li>
Framegrabber not seen in system #<a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#system1">2.1.1↑</a>, see <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Framegrabber">2.1.3↑</a>. Symptom: <b>Gonzales</b> opens without responding and after a while trows obscure errors about Bitflow routines. To troubleshoot: open the Bitflow utilities PCIwalk: if no framegrabber is listed there, we have the problem. Other Bitflow utilities will also fail throwing errors.
</li>
<li>
RAID disk failures, see <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Disk-array-and">2.1.4↑</a>.
</li>
<li>
Losses of sync, see <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#remark:out-of-sync">3.1.1↑</a>.
</li>
<li>
Salt and pepper noise, see <a class="Reference" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#sub:Camera-settings-frame">3.1.2↑</a>.
</li>
<li>
Basler degradation of the image: it was some image degradation, or loss of sync, or NI framegrabber timeout after some minutes of work of the camera (don’t exactly remember). What I <i>do</i> remember is that me and Udi went crazy in searching the cause, trying to correlate it to cables, temperature, time of the day. At the end it turned out that the original power supply of the camera was faulty, and replacement with an off-the-shelf switching PS bought at Tzafrir solved the problem.
</li>

</ul>
<a class="toc" name="Index"></a><h1 class="index">Index</h1><p class="printindex">
<a class="printindex" name="index-&gt;b2"></a>&gt;b2: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry->b2-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-AOI"></a>AOI: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-AOI-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Acquired-frame"></a>Acquired frame: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Acquired-frame-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Allow"></a>Allow: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Allow-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Digital-lines-routing"></a>Digital lines routing: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Digital-lines-routing-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Event-trigger-line-(IN)"></a>Event trigger line (IN): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Event-trigger-line-(IN)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Formula-to-Write-to-file"></a>Formula to Write to file: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Formula-to-Write-to-file-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Formulas"></a>Formulas: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Formulas-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Formulas-1">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Formulas-2">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Formulas-(Gonzales)"></a>Formulas (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Formulas-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Frame-position"></a>Frame position: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Frame-position-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Global-Rectangle"></a>Global Rectangle: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Global-Rectangle-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Host-reported-to"></a>Host reported to: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Host-reported-to-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Hots"></a>Hots: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Hots-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Hotspot"></a>Hotspot: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Hotspot-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Hotspot-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Hotspots"></a>Hotspots: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Hotspots-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Karbon-camera-configuration"></a>Karbon camera configuration: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Karbon-camera-configuration-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Karbon-camera-configuration-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Load-ROI-logic-(Gonzales)"></a>Load ROI logic (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Load-ROI-logic-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Local-in-port"></a>Local in port: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Local-in-port-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Local-in-port-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Local-out-port"></a>Local out port: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Local-out-port-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Lower-threshold-(Gonzales)"></a>Lower threshold (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Lower-threshold-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-PanTilt"></a>PanTilt: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-PanTilt-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Quit-button"></a>Quit button: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Quit-button-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-R-value"></a>R value: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-R-value-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI"></a>ROI: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-across-files"></a>ROI across files: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-across-files-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-all"></a>ROI all: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-all-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-size"></a>ROI size: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-size-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-write"></a>ROI write: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-write-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-x-offset"></a>ROI x offset: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-x-offset-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROI-y-offset"></a>ROI y offset: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROI-y-offset-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-ROItracker"></a>ROItracker: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROItracker-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-ROItracker-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Remote-in-port"></a>Remote in port: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Remote-in-port-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Save-ROI-logic-(Gonzales)"></a>Save ROI logic (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Save-ROI-logic-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Show-Image"></a>Show Image: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Show-Image-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-The-Blob"></a>The Blob: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-The-Blob-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-The-activity-bar"></a>The activity bar: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-The-activity-bar-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-The-activity-bar-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-UDP-in-status"></a>UDP in status: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-UDP-in-status-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-UDP-out-status"></a>UDP out status: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-UDP-out-status-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-UDP-remote-commanding"></a>UDP remote commanding: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-UDP-remote-commanding-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-UDP-reporting"></a>UDP reporting: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-UDP-reporting-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Upper-threshold-(Gonzales)"></a>Upper threshold (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Upper-threshold-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Visible-stat"></a>Visible stat: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Visible-stat-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Write-repeat-line-(OUT)"></a>Write repeat line (OUT): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Write-repeat-line-(OUT)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Write-to-file"></a>Write to file: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Write-to-file-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Write-to-file-1">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Write-to-file-2">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-Write-trigger-line-(IN)"></a>Write trigger line (IN): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-Write-trigger-line-(IN)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-activity-type"></a>activity type: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-activity-type-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-auto-update-ref"></a>auto update ref: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-auto-update-ref-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-b1&lt;"></a>b1&lt;: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-b1<-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-backlog"></a>backlog: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-backlog-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-bookmark1"></a>bookmark1: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-bookmark1-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-bookmark2"></a>bookmark2: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-bookmark2-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-camera-framestamp"></a>camera framestamp: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-camera-framestamp-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-camera-setup"></a>camera setup: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-camera-setup-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-camera-setup-status"></a>camera setup status: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-camera-setup-status-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-closed-press-to-reopen-(Image-Reader)"></a>closed, press to reopen (Image Reader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-closed-press-to-reopen-(Image-Reader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-command-accepted"></a>command accepted: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-command-accepted-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-command-line"></a>command line: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-command-line-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-crosshair"></a>crosshair: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-crosshair-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-datagram"></a>datagram: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-datagram-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-description-(ImageReader)"></a>description (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-description-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-description-text-(Gonzales)"></a>description text (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-description-text-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-dt-from-end"></a>dt from end: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-dt-from-end-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-dt-from-start"></a>dt from start: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-dt-from-start-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-dt-histogram"></a>dt histogram: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-dt-histogram-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-erosions-(Gonzales)"></a>erosions (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-erosions-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-event-trigger-led"></a>event trigger led: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-event-trigger-led-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-every-(Gonzales)"></a>every (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-every-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-exposure-time-us"></a>exposure time us: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-exposure-time-us-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-exposure-time-us-exp-max"></a>exposure time us, exp max: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-exposure-time-us-exp-max-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-filename-(ImageReader)"></a>filename (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-filename-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-first-frame-in-movie"></a>first frame in movie: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-first-frame-in-movie-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-formula-label"></a>formula label: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-formula-label-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-formula-result"></a>formula result: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-formula-result-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-formula-result-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-formula-syntax"></a>formula syntax: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-formula-syntax-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-formula-to-playlist"></a>formula to playlist: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-formula-to-playlist-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-fps"></a>fps: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-fps-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-fps-max"></a>fps max: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-fps-max-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-frame-number-(ImageReader)"></a>frame number (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-frame-number-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-frame-rate-(Jog-shuttle)"></a>frame rate (Jog shuttle): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-frame-rate-(Jog-shuttle)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-grab-fps"></a>grab fps: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-grab-fps-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-hand"></a>hand: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-hand-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-hand-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-hotspot-extraction-time"></a>hotspot extraction time: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-hotspot-extraction-time-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-images-written"></a>images written: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-images-written-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-individual-file/sequence-files"></a>individual file/sequence files: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-individual-file/sequence-files-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-last-file-modification"></a>last file modification: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-last-file-modification-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-line-IN-status"></a>line IN status: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-line-IN-status-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-line-OUT-status"></a>line OUT status: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-line-OUT-status-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-load-configuration"></a>load configuration: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-load-configuration-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-loss-log"></a>loss log: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-loss-log-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-lost-frames"></a>lost frames: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-lost-frames-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-lupe"></a>lupe: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-lupe-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-lupe-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-movie-parameters"></a>movie parameters: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-movie-parameters-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-next-bookmark-activity-stretch"></a>next bookmark activity stretch: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-next-bookmark-activity-stretch-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-next-bookmark-activity-stretch-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-number-of-images-in-queue"></a>number of images in queue: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-number-of-images-in-queue-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-number-of-images-to-record"></a>number of images to record: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-number-of-images-to-record-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-number-of-images-to-record-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-open-file-button-(Gonzales)"></a>open file button (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-open-file-button-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-opened-(Image-Reader)"></a>opened (Image Reader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-opened-(Image-Reader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-optical-Write-to-file-mode"></a>optical Write to file mode: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-optical-Write-to-file-mode-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-pixel-clock"></a>pixel clock: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-pixel-clock-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-playlist"></a>playlist: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-playlist-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-pretrigger-time"></a>pretrigger time: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-pretrigger-time-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-previous-bookmark-activity-stretch"></a>previous bookmark activity stretch: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-previous-bookmark-activity-stretch-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-previous-bookmark-activity-stretch-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-progressive-files"></a>progressive files: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-progressive-files-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-progressive-files-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-queue-log"></a>queue log: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-queue-log-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-rectangle"></a>rectangle: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-rectangle-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-rectangle-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-reference-background-image-(Gonzales)"></a>reference background image (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-reference-background-image-(Gonzales)-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-reference-background-image-(Gonzales)-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-reference-image-(Gonzales)"></a>reference image (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-reference-image-(Gonzales)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-roi&gt;big"></a>roi&gt;big: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-roi>big-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-routing-(OUT)"></a>routing (OUT): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-routing-(OUT)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-save-configuration"></a>save configuration: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-save-configuration-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-scan-for-activity"></a>scan for activity: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-scan-for-activity-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-scan-jump"></a>scan jump: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-scan-jump-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-scan-jump-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-self-tracking"></a>self tracking: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-self-tracking-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-self-tracking-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-selftracking-delay"></a>selftracking delay: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-selftracking-delay-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-setting-led"></a>setting led: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-setting-led-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-show-R-values"></a>show R values: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-show-R-values-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-software-framestamp"></a>software framestamp: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-software-framestamp-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-software-timestamp"></a>software timestamp: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-software-timestamp-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-streamfile-(Gonzales)"></a>streamfile (Gonzales): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-streamfile-(Gonzales)-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-streamfile-(Gonzales)-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-take-as-reference"></a>take as reference: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-take-as-reference-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-take-as-reference-(ImageReader)"></a>take as reference (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-take-as-reference-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-taps"></a>taps: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-taps-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-the-green-slider"></a>the green slider: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-the-green-slider-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-the-red-slider"></a>the red slider: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-the-red-slider-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-the-yellow-slider"></a>the yellow slider: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-the-yellow-slider-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-thresholded-difference-(ImageReader)"></a>thresholded difference (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-thresholded-difference-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-thresholded-self"></a>thresholded self: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-thresholded-self-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-thresholding:-lower-upper-erosions-(ImageReader)"></a>thresholding: lower, upper, erosions (ImageReader): <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-thresholding:-lower-upper-erosions-(ImageReader)-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-time-loss-percent"></a>time loss percent: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-time-loss-percent-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-time-recorded"></a>time recorded: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-time-recorded-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-total-recording-time"></a>total recording time: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-total-recording-time-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-trajectory"></a>trajectory: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-trajectory-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-trigger-check-interval"></a>trigger check interval: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-trigger-check-interval-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-write-if-present-in-self"></a>write if present in self: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-write-if-present-in-self-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-write-if-trigger"></a>write if trigger: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-write-if-trigger-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-write-if-trigger-1">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-write-loop-fps"></a>write loop fps: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-write-loop-fps-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-write-trigger-led"></a>write trigger led: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-write-trigger-led-0">↑</a>
</p>
<p class="printindex">
<a class="printindex" name="index-writing-led"></a>writing led: <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-writing-led-0">↑</a>, <a class="IndexArrow" href="http://webhome.weizmann.ac.il/home/fesegre/Gonzales/ManualeStreamer.html#entry-writing-led-1">↑</a>
</p>

<hr class="footer">
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2014-10-27T18:33:34.055823</span>
</div>
</div>


</body></html>